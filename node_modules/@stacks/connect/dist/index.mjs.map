{"version":3,"sources":["../src/auth.ts","../src/utils.ts","../src/bitcoin/psbt.ts","../src/transactions/index.ts","../../../node_modules/@stacks/common/src/utils.ts","../src/types/transactions.ts","../src/signature/index.ts","../src/signature/structuredData.ts","../src/profile/index.ts","../src/types/bitcoin.ts","../src/ui.ts","../src/providers.ts","../src/index.ts"],"names":["AppConfig","UserSession","decodeToken","getSelectedProviderId","getProviderFromId","getStacksProvider","isStacksWalletInstalled","defaultAuthURL","isMobile","ua","shouldUsePopup","getOrCreateUserSession","userSession","appConfig","authenticate","authOptions","provider","redirectTo","manifestPath","onFinish","onCancel","sendToSignIn","_userSession","appDetails","transitKey","authRequest","authResponse","token","authResponsePayload","error","getUserData","StacksTestnet","createUnsecuredToken","TokenSigner","hexes","_","i","bytesToHex","uint8a","hex","u","hexToBytes","paddedHex","array","j","hexByte","byte","ChainID","deserializeTransaction","serializeCV","serializePostCondition","SECP256K1Client","TransactionTypes","ContractCallArgumentType","getUserSession","hasAppPrivateKey","e","getKeys","privateKey","publicKey","getStxAddress","options","_a","stxAddress","network","stxAddresses","chainIdToKey","getDefaults","defaults","__spreadProps","__spreadValues","encodePostConditions","postConditions","pc","signPayload","payload","createUnsignedTransactionPayload","openTransactionPopup","_b","_c","txResponse","txRaw","txBytes","stacksTransaction","makeContractCallToken","functionArgs","_options","__objRest","args","arg","makeContractDeployToken","makeSTXTransferToken","amount","makeSignTransaction","txHex","generateTokenAndOpenPopup","makeTokenFn","openContractCall","openContractDeploy","openSTXTransfer","openSignTransaction","getDefaultPsbtRequestOptions","openPsbtPopup","psbtResponse","makePsbtToken","allowedSighash","signAtIndex","openPsbtRequestPopup","getDefaultSignatureRequestOptions","openSignaturePopup","signatureResponse","signMessage","openSignatureRequestPopup","openStructuredDataSignaturePopup","parseUnserializableBigIntValues","signStructuredMessage","openStructuredDataSignatureRequestPopup","getDefaultProfileUpdateRequestOptions","openProfileUpdatePopup","profileUpdateResponse","makeProfileUpdateToken","profile","openProfileUpdateRequestPopup","SignatureHash","clearSelectedProviderId","getInstalledProviders","defineCustomElements","DEFAULT_PROVIDERS","wrapConnectCall","action","persistSelection","selectedId","selectedProvider","defaultProviders","installedProviders","element","originalOverflow","closeModal","handleEsc","ev","showConnect","showSTXTransfer","showContractCall","showContractDeploy","showSignTransaction","showPsbt","showProfileUpdate","showSignMessage","showSignStructuredMessage","disconnect","showBlockstackConnect","setSelectedProviderId"],"mappings":"+kBAAA,OAAS,aAAAA,GAAW,eAAAC,OAAmB,eACvC,OAAS,eAAAC,OAAmB,aCD5B,OAAS,yBAAAC,EAAuB,qBAAAC,OAAyB,qBAElD,SAASC,GAAoB,CAElC,OADiBD,GAAkBD,EAAsB,CAAC,GACvC,OAAO,gBAAkB,OAAO,kBACrD,CAEO,SAASG,IAA0B,CACxC,MAAO,CAAC,CAACD,EAAkB,CAC7B,CDHO,IAAME,GAAiB,6BAE1B,OAAO,QAAW,cACpB,OAAO,oBAAsB,eAGxB,IAAMC,GAAW,IAAM,CAC5B,IAAMC,EAAK,UAAU,UAIrB,MAHI,WAAW,KAAKA,CAAE,GAGlB,mBAAmB,KAAKA,CAAE,EACrB,GAEF,iBAAiB,KAAKA,CAAE,CACjC,EAKaC,GAAiB,IACrB,CAACF,GAAS,EAGNG,EAA0BC,GAA2C,CAChF,GAAI,CAACA,EAAa,CAChB,IAAMC,EAAY,IAAIb,GAAU,CAAC,aAAa,EAAG,SAAS,SAAS,IAAI,EACvEY,EAAc,IAAIX,GAAY,CAAE,UAAAY,CAAU,CAAC,CAC7C,CACA,OAAOD,CACT,EAEaE,EAAe,MAC1BC,EACAC,EAA2BX,EAAkB,IAC1C,CACH,GAAI,CAACW,EAAU,MAAM,IAAI,MAAM,4CAA4C,EAE3E,GAAM,CACJ,WAAAC,EAAa,IACb,aAAAC,EACA,SAAAC,EACA,SAAAC,EACA,aAAAC,EAAe,GACf,YAAaC,EACb,WAAAC,CACF,EAAIR,EACEH,EAAcD,EAAuBW,CAAY,EACnDV,EAAY,eAAe,GAC7BA,EAAY,YAAY,EAE1B,IAAMY,EAAaZ,EAAY,2BAA2B,EACpDa,EAAcb,EAAY,gBAC9BY,EACA,GAAG,SAAS,SAAS,MAAM,GAAGP,CAAU,GACxC,GAAG,SAAS,SAAS,MAAM,GAAGC,CAAY,GAC1CN,EAAY,UAAU,OACtB,OACA,OACA,CACE,aAAAS,EACA,WAAAE,EACA,eAAgB,aAClB,CACF,EAEA,GAAI,CACF,IAAMG,EAAe,MAAMV,EAAS,sBAAsBS,CAAW,EACrE,MAAMb,EAAY,oBAAoBc,CAAY,EAClD,IAAMC,EAAQzB,GAAYwB,CAAY,EAEhCE,EADUD,GAAA,YAAAA,EAAO,QAEvBR,GAAA,MAAAA,EAAW,CACT,aAAAO,EACA,oBAAAE,EACA,YAAAhB,CACF,EACF,OAASiB,EAAO,CACd,QAAQ,MAAM,sCAAuCA,CAAK,EAC1DT,GAAA,MAAAA,GACF,CACF,EAGaU,GAAc,MAAOlB,IAChCA,EAAcD,EAAuBC,CAAW,EAC5CA,EAAY,eAAe,EACtBA,EAAY,aAAa,EAE9BA,EAAY,gBAAgB,EACvBA,EAAY,oBAAoB,EAElC,MElGT,OAAS,iBAAAmB,OAAqB,kBAC9B,OAAS,wBAAAC,GAA4B,eAAAC,OAAmB,aCDxD,OAAS,aAAAjC,GAAW,eAAAC,OAAmB,eCievC,IAAMiC,GAAQ,MAAM,KAAK,CAAE,OAAQ,GAAG,EAAI,CAACC,EAAGC,IAAMA,EAAE,SAAS,EAAE,EAAE,SAAS,EAAG,GAAG,CAAC,EAS7E,SAAUC,EAAWC,EAAkB,CAE3C,GAAI,EAAEA,aAAkB,YAAa,MAAM,IAAI,MAAM,qBAAqB,EAC1E,IAAIC,EAAM,GACV,QAAWC,KAAKF,EACdC,GAAOL,GAAMM,CAAC,EAEhB,OAAOD,CACT,CASM,SAAUE,EAAWF,EAAW,CACpC,GAAI,OAAOA,GAAQ,SACjB,MAAM,IAAI,UAAU,oCAAoC,OAAOA,CAAG,EAAE,EAEtE,IAAMG,EAAYH,EAAI,OAAS,EAAI,IAAIA,CAAG,GAAKA,EACzCI,EAAQ,IAAI,WAAWD,EAAU,OAAS,CAAC,EACjD,QAASN,EAAI,EAAGA,EAAIO,EAAM,OAAQP,IAAK,CACrC,IAAMQ,EAAIR,EAAI,EACRS,EAAUH,EAAU,MAAME,EAAGA,EAAI,CAAC,EAClCE,EAAO,OAAO,SAASD,EAAS,EAAE,EACxC,GAAI,OAAO,MAAMC,CAAI,GAAKA,EAAO,EAAG,MAAM,IAAI,MAAM,uBAAuB,EAC3EH,EAAMP,CAAC,EAAIU,EAEb,OAAOH,CACT,CDvgBA,OAAS,iBAAAZ,OAAqB,kBAC9B,OACE,WAAAgB,EACA,0BAAAC,GAEA,eAAAC,GACA,0BAAAC,OACK,uBACP,OAAS,wBAAAlB,GAA4B,mBAAAmB,GAAiB,eAAAlB,OAAmB,aEkDlE,IAAKmB,QACVA,EAAA,aAAe,gBACfA,EAAA,eAAiB,iBACjBA,EAAA,YAAc,iBAHJA,QAAA,IAUAC,QACVA,EAAA,OAAS,SACTA,EAAA,KAAO,OACPA,EAAA,IAAM,MACNA,EAAA,UAAY,YACZA,EAAA,KAAO,OALGA,QAAA,IFjCL,IAAMC,EAAkBhC,GAA+B,CAC5D,IAAIV,EAAcU,EAElB,GAAI,CAACV,EAAa,CAChB,IAAMC,EAAY,IAAIb,GAAU,CAAC,aAAa,EAAG,SAAS,SAAS,IAAI,EACvEY,EAAc,IAAIX,GAAY,CAAE,UAAAY,CAAU,CAAC,CAC7C,CACA,OAAOD,CACT,EAEO,SAAS2C,EAAiB3C,EAA2B,CAC1D,GAAI,CAEF,OADgB0C,EAAe1C,CAAW,EAAE,aAAa,EAC1C,aACjB,OAAS4C,EAAG,CACV,MAAO,EACT,CACF,CAEO,IAAMC,EAAWnC,GAA+B,CAErD,IAAMoC,EADcJ,EAAehC,CAAY,EAChB,aAAa,EAAE,cACxCqC,EAAYR,GAAgB,gBAAgBO,CAAU,EAE5D,MAAO,CAAE,WAAAA,EAAY,UAAAC,CAAU,CACjC,EAGO,SAASC,GAAcC,EAA6B,CAjE3D,IAAAC,EAkEE,GAAM,CAAE,WAAAC,EAAY,YAAAnD,EAAa,QAAAoD,CAAQ,EAAIH,EAE7C,GAAIE,EAAY,OAAOA,EACvB,GAAI,CAACnD,GAAe,CAACoD,EAAS,OAC9B,IAAMC,GAAeH,EAAAlD,GAAA,YAAAA,EAAa,eAAe,UAA5B,YAAAkD,EAAqC,WACpDI,EAAe,CACnB,CAACnB,EAAQ,OAAO,EAAG,UACnB,CAACA,EAAQ,OAAO,EAAG,SACrB,EAEA,OADoCkB,GAAA,YAAAA,EAAeC,EAAaF,EAAQ,OAAO,EAEjF,CAEA,SAASG,GAAYN,EAA6B,CAChD,IAAMG,EAAUH,EAAQ,SAAW,IAAI9B,GAEjCnB,EAAc0C,EAAeO,EAAQ,WAAW,EAChDO,EAA+BC,EAAAC,EAAA,GAChCT,GADgC,CAEnC,QAAAG,EACA,YAAApD,CACF,GAEA,OAAO0D,EAAA,CACL,WAAYV,GAAcQ,CAAQ,GAC/BA,EAEP,CAEA,SAASG,EAAqBC,EAAiC,CAC7D,OAAOA,EAAe,IAAIC,GAAMpC,EAAWa,GAAuBuB,CAAE,CAAC,CAAC,CACxE,CAGA,eAAeC,EAAYC,EAA6BjB,EAAoB,CAC1E,GAAI,CAAE,eAAAc,CAAe,EAAIG,EACzB,OAAIH,GAAkB,OAAOA,EAAe,CAAC,GAAM,WACjDA,EAAiBD,EAAqBC,CAAiC,GAErD,IAAIvC,GAAY,SAAUyB,CAAU,EAErC,UAAUW,EAAAC,EAAA,GAAKK,GAAL,CAAc,eAAAH,CAAe,EAAQ,CACpE,CAEA,SAASI,EAAiCD,EAAsC,CAC9E,GAAI,CAAE,eAAAH,CAAe,EAAIG,EACzB,OAAIH,GAAkB,OAAOA,EAAe,CAAC,GAAM,WACjDA,EAAiBD,EAAqBC,CAAiC,GAElExC,GAAqBqC,EAAAC,EAAA,GAAKK,GAAL,CAAc,eAAAH,CAAe,EAAoB,CAC/E,CAEA,IAAMK,GAAuB,MAC3B,CAAE,MAAAlD,EAAO,QAAAkC,CAAQ,EACjB7C,IACG,CAzHL,IAAA8C,EAAAgB,EAAAC,EA0HE,GAAI,CACF,IAAMC,EAAa,MAAMhE,EAAS,mBAAmBW,CAAK,EACpD,CAAE,MAAAsD,CAAM,EAAID,EACZE,EAAUzC,EAAWwC,EAAM,QAAQ,MAAO,EAAE,CAAC,EAC7CE,EAAoBnC,GAAuBkC,CAAO,EAExD,GAAI,cAAerB,GAAWA,EAAQ,UAAW,EAC/CC,EAAAD,EAAQ,WAAR,MAAAC,EAAA,KAAAD,EAAmBQ,EAAAC,EAAA,GACbU,GADa,CAEjB,kBAAAG,CACF,IACA,MACF,EACAL,EAAAjB,EAAQ,WAAR,MAAAiB,EAAA,KAAAjB,EAAmBQ,EAAAC,EAAA,GACbU,GADa,CAEjB,kBAAAG,CACF,GACF,OAAStD,EAAO,CACd,QAAQ,MAAM,6CAA8CA,CAAK,GACjEkD,EAAAlB,EAAQ,WAAR,MAAAkB,EAAA,KAAAlB,EACF,CACF,EAGauB,GAAwB,MAAOvB,GAAiC,CAC3E,IAA+DC,EAAAD,EAAvD,cAAAwB,EAAc,WAAA9D,EAAY,YAAAX,CAnJpC,EAmJiEkD,EAAbwB,EAAAC,EAAazB,EAAb,CAA1C,eAAc,aAAY,gBAE5B0B,EAAiBH,EAAa,IAAII,GAClC,OAAOA,GAAQ,SACVA,EAEFpD,EAAWY,GAAYwC,CAAG,CAAC,CACnC,EACD,GAAIlC,EAAiB3C,CAAW,EAAG,CACjC,GAAM,CAAE,WAAA8C,EAAY,UAAAC,CAAU,EAAIF,EAAQ7C,CAAW,EAC/C+D,EAA+BN,EAAAC,EAAA,GAChCgB,GADgC,CAEnC,aAAcE,EACd,uBACA,UAAA7B,CACF,GACA,OAAIpC,IAAYoD,EAAQ,WAAapD,GAC9BmD,EAAYC,EAASjB,CAAU,CACxC,CACA,IAAMiB,EAAwCN,EAAAC,EAAA,GACzCgB,GADyC,CAE5C,aAAcE,EACd,sBACF,GACA,OAAIjE,IAAYoD,EAAQ,WAAapD,GAC9BqD,EAAiCD,CAAO,CACjD,EAGae,GAA0B,MAAO7B,GAAmC,CAC/E,IAAiDC,EAAAD,EAAzC,YAAAtC,EAAY,YAAAX,CAjLtB,EAiLmDkD,EAAbwB,EAAAC,EAAazB,EAAb,CAA5B,aAAY,gBACpB,GAAIP,EAAiB3C,CAAW,EAAG,CACjC,GAAM,CAAE,WAAA8C,EAAY,UAAAC,CAAU,EAAIF,EAAQ7C,CAAW,EAC/C+D,EAAiCN,EAAAC,EAAA,GAClCgB,GADkC,CAErC,UAAA3B,EACA,uBACF,GACA,OAAIpC,IAAYoD,EAAQ,WAAapD,GAC9BmD,EAAYC,EAASjB,CAAU,CACxC,CAEA,IAAMiB,EAA0CN,EAAAC,EAAA,GAC3CgB,GAD2C,CAE9C,uBACF,GACA,OAAI/D,IAAYoD,EAAQ,WAAapD,GAC9BqD,EAAiCD,CAAO,CACjD,EAGagB,GAAuB,MAAO9B,GAAgC,CACzE,IAAyDC,EAAAD,EAAjD,QAAA+B,EAAQ,WAAArE,EAAY,YAAAX,CAvM9B,EAuM2DkD,EAAbwB,EAAAC,EAAazB,EAAb,CAApC,SAAQ,aAAY,gBAE5B,GAAIP,EAAiB3C,CAAW,EAAG,CACjC,GAAM,CAAE,WAAA8C,EAAY,UAAAC,CAAU,EAAIF,EAAQ7C,CAAW,EAC/C+D,EAA8BN,EAAAC,EAAA,GAC/BgB,GAD+B,CAElC,OAAQM,EAAO,SAAS,EAAE,EAC1B,UAAAjC,EACA,uBACF,GACA,OAAIpC,IAAYoD,EAAQ,WAAapD,GAC9BmD,EAAYC,EAASjB,CAAU,CACxC,CAEA,IAAMiB,EAAuCN,EAAAC,EAAA,GACxCgB,GADwC,CAE3C,OAAQM,EAAO,SAAS,EAAE,EAC1B,uBACF,GACA,OAAIrE,IAAYoD,EAAQ,WAAapD,GAC9BqD,EAAiCD,CAAO,CACjD,EAEakB,GAAsB,MAAOhC,GAAoC,CAC5E,IAAwDC,EAAAD,EAAhD,OAAAiC,EAAO,WAAAvE,EAAY,YAAAX,CA/N7B,EA+N0DkD,EAAbwB,EAAAC,EAAazB,EAAb,CAAnC,QAAO,aAAY,gBAE3B,GAAIP,EAAiB3C,CAAW,EAAG,CACjC,GAAM,CAAE,WAAA8C,EAAY,UAAAC,CAAU,EAAIF,EAAQ7C,CAAW,EAC/C+D,EAAkCN,EAAAC,EAAA,GACnCgB,GADmC,CAEtC,MAAAQ,EACA,UAAAnC,CACF,GACA,OAAIpC,IAAYoD,EAAQ,WAAapD,GAC9BmD,EAAYC,EAASjB,CAAU,CACxC,CAEA,IAAMiB,EAA2CN,EAAAC,EAAA,GAC5CgB,GAD4C,CAE/C,MAAAQ,CACF,GACA,OAAIvE,IAAYoD,EAAQ,WAAapD,GAC9BqD,EAAiCD,CAAO,CACjD,EAEA,eAAeoB,EACblC,EACAmC,EACAhF,EACA,CACA,IAAMW,EAAQ,MAAMqE,EAAY1B,IAAA,GAC3BH,GAAYN,CAAO,GACnBA,EACC,EACN,OAAOgB,GAAqB,CAAE,MAAAlD,EAAO,QAAAkC,CAAQ,EAAG7C,CAAQ,CAC1D,CAEO,SAASiF,EACdpC,EACA7C,EAA2BX,EAAkB,EAC7C,CACA,GAAI,CAACW,EAAU,MAAM,IAAI,MAAM,4CAA4C,EAC3E,OAAO+E,EAA0BlC,EAASuB,GAAuBpE,CAAQ,CAC3E,CAEO,SAASkF,EACdrC,EACA7C,EAA2BX,EAAkB,EAC7C,CACA,GAAI,CAACW,EAAU,MAAM,IAAI,MAAM,4CAA4C,EAC3E,OAAO+E,EAA0BlC,EAAS6B,GAAyB1E,CAAQ,CAC7E,CAEO,SAASmF,EACdtC,EACA7C,EAA2BX,EAAkB,EAC7C,CACA,GAAI,CAACW,EAAU,MAAM,IAAI,MAAM,4CAA4C,EAC3E,OAAO+E,EAA0BlC,EAAS8B,GAAsB3E,CAAQ,CAC1E,CAEO,SAASoF,EACdvC,EACA7C,EAA2BX,EAAkB,EAC7C,CACA,GAAI,CAACW,EAAU,MAAM,IAAI,MAAM,4CAA4C,EAC3E,OAAO+E,EAA0BlC,EAASgC,GAAqB7E,CAAQ,CACzE,CDrRA,eAAe0D,GAAYC,EAAsBjB,EAAoB,CAGnE,OAFoB,IAAIzB,GAAY,SAAUyB,CAAU,EAErC,UAAUY,EAAA,GAAKK,EAAgB,CACpD,CAEO,SAAS0B,GAA6BxC,EAA6B,CACxE,IAAMG,EAAUH,EAAQ,SAAW,IAAI9B,GACjCnB,EAAc0C,EAAeO,EAAQ,WAAW,EAChDO,EAA+BC,EAAAC,EAAA,GAChCT,GADgC,CAEnC,QAAAG,EACA,YAAApD,CACF,GACA,OAAO0D,EAAA,GACFF,EAEP,CAEA,eAAekC,GAAc,CAAE,MAAA3E,EAAO,QAAAkC,CAAQ,EAAc7C,EAA0B,CA5BtF,IAAA8C,EAAAgB,EA6BE,GAAI,CAAC9D,EAAU,MAAM,IAAI,MAAM,4CAA4C,EAE3E,GAAI,CACF,IAAMuF,EAAe,MAAMvF,EAAS,YAAYW,CAAK,GACrDmC,EAAAD,EAAQ,WAAR,MAAAC,EAAA,KAAAD,EAAmB0C,EACrB,OAAS1E,EAAO,CACd,QAAQ,MAAM,sCAAuCA,CAAK,GAC1DiD,EAAAjB,EAAQ,WAAR,MAAAiB,EAAA,KAAAjB,EACF,CACF,CAGO,IAAM2C,GAAgB,MAAO3C,GAAgC,CAClE,IAAuEC,EAAAD,EAA/D,gBAAA4C,EAAgB,IAAAlE,EAAK,YAAAmE,EAAa,YAAA9F,CA1C5C,EA0CyEkD,EAAbwB,EAAAC,EAAazB,EAAb,CAAlD,iBAAgB,MAAK,cAAa,gBAC1C,GAAIP,EAAiB3C,CAAW,EAAG,CACjC,GAAM,CAAE,WAAA8C,EAAY,UAAAC,CAAU,EAAIF,EAAQ7C,CAAW,EAE/C+D,EAAuBN,EAAAC,EAAA,GACxBgB,GADwB,CAE3B,eAAAmB,EACA,IAAAlE,EACA,YAAAmE,EACA,UAAA/C,CACF,GAEA,OAAOe,GAAYC,EAASjB,CAAU,CACxC,CACA,IAAMiB,EAAUL,EAAA,GAAKgB,GACrB,OAAOtD,GAAqB2C,CAAe,CAC7C,EAEA,eAAeoB,GACblC,EACAmC,EACAhF,EACA,CACA,IAAMW,EAAQ,MAAMqE,EAAY1B,IAAA,GAC3B+B,GAA6BxC,CAAO,GACpCA,EACC,EACN,OAAOyC,GAAc,CAAE,MAAA3E,EAAO,QAAAkC,CAAQ,EAAG7C,CAAQ,CACnD,CAKO,SAAS2F,EACd9C,EACA7C,EAA2BX,EAAkB,EAC7C,CACA,OAAO0F,GAA0BlC,EAAS2C,GAAexF,CAAQ,CACnE,CIhFA,OAAS,iBAAAe,OAAqB,kBAC9B,OAAS,WAAAgB,MAAe,uBACxB,OAAS,wBAAAf,GAAsB,eAAAC,OAAmB,aAYlD,SAAS2B,GAAcC,EAAwC,CAd/D,IAAAC,EAeE,GAAM,CAAE,YAAAlD,EAAa,QAAAoD,CAAQ,EAAIH,EAEjC,GAAI,CAACjD,GAAe,CAACoD,EAAS,OAC9B,IAAMC,GAAeH,EAAAlD,GAAA,YAAAA,EAAa,eAAe,UAA5B,YAAAkD,EAAqC,WACpDI,EAAe,CACnB,CAACnB,EAAQ,OAAO,EAAG,UACnB,CAACA,EAAQ,OAAO,EAAG,SACrB,EAEA,OADoCkB,GAAA,YAAAA,EAAeC,EAAaF,EAAQ,OAAO,EAEjF,CAGA,eAAeU,GAAYC,EAA2BjB,EAAoB,CAGxE,OAFoB,IAAIzB,GAAY,SAAUyB,CAAU,EAErC,UAAUY,EAAA,GAAKK,EAAgB,CACpD,CAEO,SAASiC,EAAkC/C,EAAwC,CACxF,IAAMG,EAAUH,EAAQ,SAAW,IAAI9B,GACjCnB,EAAc0C,EAAeO,EAAQ,WAAW,EAChDO,EAA0CC,EAAAC,EAAA,GAC3CT,GAD2C,CAE9C,QAAAG,EACA,YAAApD,CACF,GACA,OAAO0D,EAAA,CACL,WAAYV,GAAcQ,CAAQ,GAC/BA,EAEP,CAEA,eAAeyC,GAAmB,CAAE,MAAAlF,EAAO,QAAAkC,CAAQ,EAAmB7C,EAA0B,CAhDhG,IAAA8C,EAAAgB,EAiDE,GAAI,CACF,IAAMgC,EAAoB,MAAM9F,EAAS,iBAAiBW,CAAK,GAC/DmC,EAAAD,EAAQ,WAAR,MAAAC,EAAA,KAAAD,EAAmBiD,EACrB,OAASjF,EAAO,CACd,QAAQ,MAAM,2CAA4CA,CAAK,GAC/DiD,EAAAjB,EAAQ,WAAR,MAAAiB,EAAA,KAAAjB,EACF,CACF,CAOO,IAAMkD,GAAc,MAAOlD,GAAqC,CACrE,IAAqCC,EAAAD,EAA7B,aAAAjD,CAhEV,EAgEuCkD,EAAbwB,EAAAC,EAAazB,EAAb,CAAhB,gBACR,GAAIP,EAAiB3C,CAAW,EAAG,CACjC,GAAM,CAAE,WAAA8C,EAAY,UAAAC,CAAU,EAAIF,EAAQ7C,CAAW,EAE/C+D,EAA4BN,EAAAC,EAAA,GAC7BgB,GAD6B,CAEhC,UAAA3B,CACF,GAEA,OAAOe,GAAYC,EAASjB,CAAU,CACxC,CACA,IAAMiB,EAAUL,EAAA,GAAKgB,GAErB,OAAOtD,GAAqB2C,CAAc,CAC5C,EAEA,eAAeoB,GACblC,EACAmC,EACAhF,EACA,CACA,IAAMW,EAAQ,MAAMqE,EAAY1B,IAAA,GAC3BsC,EAAkC/C,CAAO,GACzCA,EACC,EACN,OAAOgD,GAAmB,CAAE,MAAAlF,EAAO,QAAAkC,CAAQ,EAAG7C,CAAQ,CACxD,CAEO,SAASgG,EACdnD,EACA7C,EAA2BX,EAAkB,EAC7C,CACA,GAAI,CAACW,EAAU,MAAM,IAAI,MAAM,4CAA4C,EAC3E,OAAO+E,GAA0BlC,EAASkD,GAAa/F,CAAQ,CACjE,CCjGA,OAAS,eAAAiC,MAAmB,uBAC5B,OAAS,wBAAAjB,GAAsB,eAAAC,OAAmB,aAYlD,eAAe8D,GACblC,EACAmC,EACAhF,EACA,CACA,IAAMW,EAAQ,MAAMqE,EAAY1B,IAAA,GAC3BsC,EAAkC/C,CAAO,GACzCA,EACC,EACN,OAAOoD,GAAiC,CAAE,MAAAtF,EAAO,QAAAkC,CAAQ,EAAG7C,CAAQ,CACtE,CAEA,SAASkG,EAAgCvC,EAAc,CACrD,OAAON,EAAAC,EAAA,GACFK,GADE,CAEL,QAAStC,EAAWY,EAAY0B,EAAQ,OAAO,CAAC,EAChD,OAAQtC,EAAWY,EAAY0B,EAAQ,MAAM,CAAC,CAChD,EACF,CAGA,eAAeD,GAAYC,EAAyCjB,EAAoB,CAEtF,OADoB,IAAIzB,GAAY,SAAUyB,CAAU,EACrC,UAAUwD,EAAgCvC,CAAO,CAAC,CACvE,CAGA,eAAsBwC,GAAsBtD,EAAgD,CAC1F,IAAqCC,EAAAD,EAA7B,aAAAjD,CA1CV,EA0CuCkD,EAAbwB,EAAAC,EAAazB,EAAb,CAAhB,gBACR,GAAIP,EAAiB3C,CAAW,EAAG,CACjC,GAAM,CAAE,WAAA8C,EAAY,UAAAC,CAAU,EAAIF,EAAQ7C,CAAW,EAC/C+D,EAA0CN,EAAAC,EAAA,GAC3CgB,GAD2C,CAE9C,UAAA3B,CACF,GACA,OAAOe,GAAYC,EAASjB,CAAU,CACxC,CAGA,OAAO1B,GAAqBkF,EAAgCrD,CAAO,CAAC,CACtE,CAEA,eAAeoD,GACb,CAAE,MAAAtF,EAAO,QAAAkC,CAAQ,EACjB7C,EACA,CA3DF,IAAA8C,EAAAgB,EA4DE,GAAI,CACF,IAAMgC,EAAoB,MAAM9F,EAAS,+BAA+BW,CAAK,GAE7EmC,EAAAD,EAAQ,WAAR,MAAAC,EAAA,KAAAD,EAAmBiD,EACrB,OAASjF,EAAO,CACd,QAAQ,MAAM,2CAA4CA,CAAK,GAC/DiD,EAAAjB,EAAQ,WAAR,MAAAiB,EAAA,KAAAjB,EACF,CACF,CAEO,SAASuD,EACdvD,EACA7C,EAA2BX,EAAkB,EAC7C,CACA,GAAI,CAACW,EAAU,MAAM,IAAI,MAAM,4CAA4C,EAC3E,OAAO+E,GAA0BlC,EAASsD,GAAuBnG,CAAQ,CAC3E,CC5EA,OAAS,iBAAAe,OAAqB,kBAC9B,OAAS,wBAAAC,GAA4B,eAAAC,OAAmB,aAYxD,eAAeyC,GAAYC,EAA+BjB,EAAoB,CAG5E,OAFoB,IAAIzB,GAAY,SAAUyB,CAAU,EAErC,UAAUY,EAAA,GAAKK,EAAgB,CACpD,CAEO,SAAS0C,GAAsCxD,EAAsC,CAC1F,IAAMG,EAAUH,EAAQ,SAAW,IAAI9B,GACjCnB,EAAc0C,EAAeO,EAAQ,WAAW,EAChDO,EAAwCC,EAAAC,EAAA,GACzCT,GADyC,CAE5C,QAAAG,EACA,YAAApD,CACF,GACA,OAAO0D,EAAA,GACFF,EAEP,CAEA,eAAekD,GACb,CAAE,MAAA3F,EAAO,QAAAkC,CAAQ,EACjB7C,EACA,CAnCF,IAAA8C,EAAAgB,EAoCE,GAAI,CACF,IAAMyC,EAAwB,MAAMvG,EAAS,qBAAqBW,CAAK,GACvEmC,EAAAD,EAAQ,WAAR,MAAAC,EAAA,KAAAD,EAAmB0D,EACrB,OAAS1F,EAAO,CACd,QAAQ,MAAM,2CAA4CA,CAAK,GAC/DiD,EAAAjB,EAAQ,WAAR,MAAAiB,EAAA,KAAAjB,EACF,CACF,CAGO,IAAM2D,GAAyB,MAAO3D,GAAyC,CACpF,IAA8CC,EAAAD,EAAtC,aAAAjD,EAAa,QAAA6G,CA/CvB,EA+CgD3D,EAAbwB,EAAAC,EAAazB,EAAb,CAAzB,cAAa,YACrB,GAAIP,EAAiB3C,CAAW,EAAG,CACjC,GAAM,CAAE,WAAA8C,EAAY,UAAAC,CAAU,EAAIF,EAAQ7C,CAAW,EAE/C+D,EAAgCN,EAAAC,EAAA,GACjCgB,GADiC,CAEpC,QAAAmC,EACA,UAAA9D,CACF,GAEA,OAAOe,GAAYC,EAASjB,CAAU,CACxC,CACA,IAAMiB,EAAUL,EAAA,GAAKgB,GACrB,OAAOtD,GAAqB2C,CAAe,CAC7C,EAEA,eAAeoB,GACblC,EACAmC,EACAhF,EACA,CACA,IAAMW,EAAQ,MAAMqE,EAAY1B,IAAA,GAC3B+C,GAAsCxD,CAAO,GAC7CA,EACC,EACN,OAAOyD,GAAuB,CAAE,MAAA3F,EAAO,QAAAkC,CAAQ,EAAG7C,CAAQ,CAC5D,CAEO,SAAS0G,EACd7D,EACA7C,EAA2BX,EAAkB,EAC7C,CACA,GAAI,CAACW,EAAU,MAAM,IAAI,MAAM,4CAA4C,EAC3E,OAAO+E,GAA0BlC,EAAS2D,GAAwBxG,CAAQ,CAC5E,CC1EO,IAAK2G,QACVA,IAAA,QAAU,GAAV,UACAA,IAAA,IAAM,GAAN,MACAA,IAAA,KAAO,GAAP,OACAA,IAAA,OAAS,GAAT,SACAA,IAAA,aAAe,KAAf,eALUA,QAAA,ICPZ,OAEE,2BAAAC,GACA,yBAAAC,GACA,yBAAA1H,OACK,qBACP,OAAS,wBAAA2H,OAA4B,4BCJ9B,IAAMC,EAAsC,CACjD,CACE,GAAI,kBACJ,KAAM,UACN,KAAM,q9CAEN,OAAQ,qBACR,kBACE,yFACF,iBAAkB,sCACpB,EACA,CACE,GAAI,iCACJ,KAAM,gBACN,KAAM,6gCAEN,OAAQ,qBACR,kBACE,2FACF,mBAAoB,yEACpB,eAAgB,qEAChB,iBAAkB,iCACpB,EACA,CACE,GAAI,iBACJ,KAAM,SACN,KAAM,64HACN,OAAQ,oBACR,kBACE,2FACJ,CACF,EDeA,SAASC,EACPC,EACAC,EAAmB,GACnB,CACA,OAAO,SAAiBrE,EAAY7C,EAA2B,CApDjE,IAAA8C,EAqDI,GAAI9C,EAAU,OAAOiH,EAAOpE,EAAS7C,CAAQ,EAE7C,IAAMmH,EAAahI,GAAsB,EACnCiI,EAAmB/H,EAAkB,EAC3C,GAAI8H,GAAcC,EAAkB,OAAOH,EAAOpE,EAASuE,CAAgB,EAE3E,GAAI,OAAO,QAAW,YAAa,OAC9BN,GAAqB,MAAM,EAEhC,IAAMO,GAAmBvE,EAAAD,GAAA,YAAAA,EAAS,mBAAT,KAAAC,EAA6BiE,EAChDO,EAAqBT,GAAsBQ,CAAgB,EAE3DE,EAAU,SAAS,cAAc,eAAe,EACtDA,EAAQ,iBAAmBF,EAC3BE,EAAQ,mBAAqBD,EAC7BC,EAAQ,iBAAmBL,EAE3B,IAAMM,EAAmB,SAAS,KAAK,MAAM,SAC7C,SAAS,KAAK,MAAM,SAAW,SAE/B,IAAMC,EAAa,IAAM,CACvBF,EAAQ,OAAO,EACf,SAAS,KAAK,MAAM,SAAWC,CACjC,EAEAD,EAAQ,SAAYH,GAAiD,CACnEK,EAAW,EACXR,EAAOpE,EAASuE,CAAgB,CAClC,EACAG,EAAQ,eAAiB,IAAM,CAlFnC,IAAAzE,EAmFM2E,EAAW,GACX3E,EAAAD,EAAQ,WAAR,MAAAC,EAAA,KAAAD,EACF,EAEA,SAAS,KAAK,YAAY0E,CAAO,EAEjC,IAAMG,EAAaC,GAAsB,CACnCA,EAAG,MAAQ,WACb,SAAS,oBAAoB,UAAWD,CAAS,EACjDH,EAAQ,OAAO,EAEnB,EACA,SAAS,iBAAiB,UAAWG,CAAS,CAChD,CACF,CAGO,IAAME,GAAcZ,EAAgBlH,EAAc,EAAK,EAGjD+H,GAAkBb,EAAgB7B,CAAe,EAEjD2C,GAAmBd,EAAgB/B,CAAgB,EAEnD8C,GAAqBf,EAAgB9B,CAAkB,EAEvD8C,GAAsBhB,EAAgB5B,CAAmB,EAGzD6C,GAAWjB,EAAgBrB,CAAoB,EAE/CuC,GAAoBlB,EAAgBN,CAA6B,EAEjEyB,GAAkBnB,EAAgBhB,CAAyB,EAE3DoC,GAA4BpB,EAAgBZ,CAAuC,EAGnFiC,GAAazB,GAKb0B,GAAwBV,GEjHrC,WAAc,eACd,OACE,2BAAAhB,GACA,yBAAAzH,GACA,yBAAAoJ,OACK","sourcesContent":["import { AppConfig, UserSession } from '@stacks/auth';\nimport { decodeToken } from 'jsontokens';\nimport type { AuthOptions, AuthResponsePayload, StacksProvider } from './types';\n\nimport { getStacksProvider } from './utils';\n\nexport const defaultAuthURL = 'https://app.blockstack.org';\n\nif (typeof window !== 'undefined') {\n  window.__CONNECT_VERSION__ = '__VERSION__'; // replaced via tsup esbuildOptions\n}\n\nexport const isMobile = () => {\n  const ua = navigator.userAgent;\n  if (/android/i.test(ua)) {\n    return true;\n  }\n  if (/iPad|iPhone|iPod/.test(ua)) {\n    return true;\n  }\n  return /windows phone/i.test(ua);\n};\n\n/**\n * mobile should not use a 'popup' type of window.\n */\nexport const shouldUsePopup = () => {\n  return !isMobile();\n};\n\nexport const getOrCreateUserSession = (userSession?: UserSession): UserSession => {\n  if (!userSession) {\n    const appConfig = new AppConfig(['store_write'], document.location.href);\n    userSession = new UserSession({ appConfig });\n  }\n  return userSession;\n};\n\nexport const authenticate = async (\n  authOptions: AuthOptions,\n  provider: StacksProvider = getStacksProvider()\n) => {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n\n  const {\n    redirectTo = '/',\n    manifestPath,\n    onFinish,\n    onCancel,\n    sendToSignIn = false,\n    userSession: _userSession,\n    appDetails,\n  } = authOptions;\n  const userSession = getOrCreateUserSession(_userSession);\n  if (userSession.isUserSignedIn()) {\n    userSession.signUserOut();\n  }\n  const transitKey = userSession.generateAndStoreTransitKey();\n  const authRequest = userSession.makeAuthRequest(\n    transitKey,\n    `${document.location.origin}${redirectTo}`,\n    `${document.location.origin}${manifestPath}`,\n    userSession.appConfig.scopes,\n    undefined,\n    undefined,\n    {\n      sendToSignIn,\n      appDetails,\n      connectVersion: '__VERSION__', // replaced via tsup esbuildOptions,\n    }\n  );\n\n  try {\n    const authResponse = await provider.authenticationRequest(authRequest);\n    await userSession.handlePendingSignIn(authResponse);\n    const token = decodeToken(authResponse);\n    const payload = token?.payload;\n    const authResponsePayload = payload as unknown as AuthResponsePayload;\n    onFinish?.({\n      authResponse,\n      authResponsePayload,\n      userSession,\n    });\n  } catch (error) {\n    console.error('[Connect] Error during auth request', error);\n    onCancel?.();\n  }\n};\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const getUserData = async (userSession?: UserSession) => {\n  userSession = getOrCreateUserSession(userSession);\n  if (userSession.isUserSignedIn()) {\n    return userSession.loadUserData();\n  }\n  if (userSession.isSignInPending()) {\n    return userSession.handlePendingSignIn();\n  }\n  return null;\n};\n","import { getSelectedProviderId, getProviderFromId } from '@stacks/connect-ui';\n\nexport function getStacksProvider() {\n  const provider = getProviderFromId(getSelectedProviderId());\n  return provider || window.StacksProvider || window.BlockstackProvider;\n}\n\nexport function isStacksWalletInstalled() {\n  return !!getStacksProvider();\n}\n","import { StacksTestnet } from '@stacks/network';\nimport { createUnsecuredToken, Json, TokenSigner } from 'jsontokens';\n\nimport { getKeys, getUserSession, hasAppPrivateKey } from '../transactions';\nimport { PsbtPayload, PsbtPopup, PsbtRequestOptions } from '../types/bitcoin';\nimport { getStacksProvider } from '../utils';\nimport { StacksProvider } from '../types';\n\n// eslint-disable-next-line @typescript-eslint/require-await\nasync function signPayload(payload: PsbtPayload, privateKey: string) {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return tokenSigner.signAsync({ ...payload } as any);\n}\n\nexport function getDefaultPsbtRequestOptions(options: PsbtRequestOptions) {\n  const network = options.network || new StacksTestnet();\n  const userSession = getUserSession(options.userSession);\n  const defaults: PsbtRequestOptions = {\n    ...options,\n    network,\n    userSession,\n  };\n  return {\n    ...defaults,\n  };\n}\n\nasync function openPsbtPopup({ token, options }: PsbtPopup, provider: StacksProvider) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n\n  try {\n    const psbtResponse = await provider.psbtRequest(token);\n    options.onFinish?.(psbtResponse);\n  } catch (error) {\n    console.error('[Connect] Error during psbt request', error);\n    options.onCancel?.();\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const makePsbtToken = async (options: PsbtRequestOptions) => {\n  const { allowedSighash, hex, signAtIndex, userSession, ..._options } = options;\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n\n    const payload: PsbtPayload = {\n      ..._options,\n      allowedSighash,\n      hex,\n      signAtIndex,\n      publicKey,\n    };\n\n    return signPayload(payload, privateKey);\n  }\n  const payload = { ..._options };\n  return createUnsecuredToken(payload as Json);\n};\n\nasync function generateTokenAndOpenPopup<T extends PsbtRequestOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>,\n  provider: StacksProvider\n) {\n  const token = await makeTokenFn({\n    ...getDefaultPsbtRequestOptions(options),\n    ...options,\n  } as T);\n  return openPsbtPopup({ token, options }, provider);\n}\n\n/**\n * @experimental\n */\nexport function openPsbtRequestPopup(\n  options: PsbtRequestOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  return generateTokenAndOpenPopup(options, makePsbtToken, provider);\n}\n","import { AppConfig, UserSession } from '@stacks/auth';\nimport { bytesToHex, hexToBytes } from '@stacks/common';\nimport { StacksTestnet } from '@stacks/network';\nimport {\n  ChainID,\n  deserializeTransaction,\n  PostCondition,\n  serializeCV,\n  serializePostCondition,\n} from '@stacks/transactions';\nimport { createUnsecuredToken, Json, SECP256K1Client, TokenSigner } from 'jsontokens';\nimport {\n  ContractCallOptions,\n  ContractCallPayload,\n  ContractCallRegularOptions,\n  ContractCallSponsoredOptions,\n  ContractDeployOptions,\n  ContractDeployPayload,\n  ContractDeployRegularOptions,\n  ContractDeploySponsoredOptions,\n  FinishedTxPayload,\n  SignTransactionOptions,\n  SignTransactionPayload,\n  SponsoredFinishedTxPayload,\n  STXTransferOptions,\n  STXTransferPayload,\n  STXTransferRegularOptions,\n  STXTransferSponsoredOptions,\n  TransactionOptions,\n  TransactionPayload,\n  TransactionPopup,\n  TransactionTypes,\n} from '../types/transactions';\nimport { getStacksProvider } from '../utils';\nimport { StacksProvider } from '../types';\n\n// TODO extract out of transactions\nexport const getUserSession = (_userSession?: UserSession) => {\n  let userSession = _userSession;\n\n  if (!userSession) {\n    const appConfig = new AppConfig(['store_write'], document.location.href);\n    userSession = new UserSession({ appConfig });\n  }\n  return userSession;\n};\n\nexport function hasAppPrivateKey(userSession?: UserSession) {\n  try {\n    const session = getUserSession(userSession).loadUserData();\n    return session.appPrivateKey;\n  } catch (e) {\n    return false;\n  }\n}\n\nexport const getKeys = (_userSession?: UserSession) => {\n  const userSession = getUserSession(_userSession);\n  const privateKey = userSession.loadUserData().appPrivateKey;\n  const publicKey = SECP256K1Client.derivePublicKey(privateKey);\n\n  return { privateKey, publicKey };\n};\n\n// TODO extract out of transactions\nexport function getStxAddress(options: TransactionOptions) {\n  const { stxAddress, userSession, network } = options;\n\n  if (stxAddress) return stxAddress;\n  if (!userSession || !network) return undefined;\n  const stxAddresses = userSession?.loadUserData().profile?.stxAddress;\n  const chainIdToKey = {\n    [ChainID.Mainnet]: 'mainnet',\n    [ChainID.Testnet]: 'testnet',\n  };\n  const address: string | undefined = stxAddresses?.[chainIdToKey[network.chainId]];\n  return address;\n}\n\nfunction getDefaults(options: TransactionOptions) {\n  const network = options.network || new StacksTestnet();\n\n  const userSession = getUserSession(options.userSession);\n  const defaults: TransactionOptions = {\n    ...options,\n    network,\n    userSession,\n  };\n\n  return {\n    stxAddress: getStxAddress(defaults),\n    ...defaults,\n  };\n}\n\nfunction encodePostConditions(postConditions: PostCondition[]) {\n  return postConditions.map(pc => bytesToHex(serializePostCondition(pc)));\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nasync function signPayload(payload: TransactionPayload, privateKey: string) {\n  let { postConditions } = payload;\n  if (postConditions && typeof postConditions[0] !== 'string') {\n    postConditions = encodePostConditions(postConditions as PostCondition[]);\n  }\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return tokenSigner.signAsync({ ...payload, postConditions } as any);\n}\n\nfunction createUnsignedTransactionPayload(payload: Partial<TransactionPayload>) {\n  let { postConditions } = payload;\n  if (postConditions && typeof postConditions[0] !== 'string') {\n    postConditions = encodePostConditions(postConditions as PostCondition[]);\n  }\n  return createUnsecuredToken({ ...payload, postConditions } as unknown as Json);\n}\n\nconst openTransactionPopup = async (\n  { token, options }: TransactionPopup,\n  provider: StacksProvider\n) => {\n  try {\n    const txResponse = await provider.transactionRequest(token);\n    const { txRaw } = txResponse;\n    const txBytes = hexToBytes(txRaw.replace(/^0x/, ''));\n    const stacksTransaction = deserializeTransaction(txBytes);\n\n    if ('sponsored' in options && options.sponsored) {\n      options.onFinish?.({\n        ...(txResponse as SponsoredFinishedTxPayload),\n        stacksTransaction,\n      });\n      return;\n    }\n    options.onFinish?.({\n      ...(txResponse as FinishedTxPayload),\n      stacksTransaction,\n    });\n  } catch (error) {\n    console.error('[Connect] Error during transaction request', error);\n    options.onCancel?.();\n  }\n};\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const makeContractCallToken = async (options: ContractCallOptions) => {\n  const { functionArgs, appDetails, userSession, ..._options } = options;\n\n  const args: string[] = functionArgs.map(arg => {\n    if (typeof arg === 'string') {\n      return arg;\n    }\n    return bytesToHex(serializeCV(arg));\n  });\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: ContractCallPayload = {\n      ..._options,\n      functionArgs: args,\n      txType: TransactionTypes.ContractCall,\n      publicKey,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n  const payload: Partial<ContractCallPayload> = {\n    ..._options,\n    functionArgs: args,\n    txType: TransactionTypes.ContractCall,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedTransactionPayload(payload);\n};\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const makeContractDeployToken = async (options: ContractDeployOptions) => {\n  const { appDetails, userSession, ..._options } = options;\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: ContractDeployPayload = {\n      ..._options,\n      publicKey,\n      txType: TransactionTypes.ContractDeploy,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n\n  const payload: Partial<ContractDeployPayload> = {\n    ..._options,\n    txType: TransactionTypes.ContractDeploy,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedTransactionPayload(payload);\n};\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const makeSTXTransferToken = async (options: STXTransferOptions) => {\n  const { amount, appDetails, userSession, ..._options } = options;\n\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: STXTransferPayload = {\n      ..._options,\n      amount: amount.toString(10),\n      publicKey,\n      txType: TransactionTypes.STXTransfer,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n\n  const payload: Partial<STXTransferPayload> = {\n    ..._options,\n    amount: amount.toString(10),\n    txType: TransactionTypes.STXTransfer,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedTransactionPayload(payload);\n};\n\nexport const makeSignTransaction = async (options: SignTransactionOptions) => {\n  const { txHex, appDetails, userSession, ..._options } = options;\n\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: SignTransactionPayload = {\n      ..._options,\n      txHex,\n      publicKey,\n    };\n    if (appDetails) payload.appDetails = appDetails;\n    return signPayload(payload, privateKey);\n  }\n\n  const payload: Partial<SignTransactionOptions> = {\n    ..._options,\n    txHex,\n  };\n  if (appDetails) payload.appDetails = appDetails;\n  return createUnsignedTransactionPayload(payload);\n};\n\nasync function generateTokenAndOpenPopup<T extends TransactionOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>,\n  provider: StacksProvider\n) {\n  const token = await makeTokenFn({\n    ...getDefaults(options),\n    ...options,\n  } as T);\n  return openTransactionPopup({ token, options }, provider);\n}\n\nexport function openContractCall(\n  options: ContractCallOptions | ContractCallRegularOptions | ContractCallSponsoredOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, makeContractCallToken, provider);\n}\n\nexport function openContractDeploy(\n  options: ContractDeployOptions | ContractDeployRegularOptions | ContractDeploySponsoredOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, makeContractDeployToken, provider);\n}\n\nexport function openSTXTransfer(\n  options: STXTransferOptions | STXTransferRegularOptions | STXTransferSponsoredOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, makeSTXTransferToken, provider);\n}\n\nexport function openSignTransaction(\n  options: SignTransactionOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, makeSignTransaction, provider);\n}\n","import { Logger } from './logger';\n\n/**\n *  @ignore\n */\nexport const BLOCKSTACK_HANDLER = 'blockstack';\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextYear() {\n  return new Date(new Date().setFullYear(new Date().getFullYear() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextMonth() {\n  return new Date(new Date().setMonth(new Date().getMonth() + 1));\n}\n\n/**\n * Time\n * @private\n * @ignore\n */\nexport function nextHour() {\n  return new Date(new Date().setHours(new Date().getHours() + 1));\n}\n\n/**\n * Converts megabytes to bytes. Returns 0 if the input is not a finite number.\n * @ignore\n */\nexport function megabytesToBytes(megabytes: number): number {\n  if (!Number.isFinite(megabytes)) {\n    return 0;\n  }\n  return Math.floor(megabytes * 1024 * 1024);\n}\n\n/**\n * Calculate the AES-CBC ciphertext output byte length a given input length.\n * AES has a fixed block size of 16-bytes regardless key size.\n * @ignore\n */\nexport function getAesCbcOutputLength(inputByteLength: number) {\n  // AES-CBC block mode rounds up to the next block size.\n  const cipherTextLength = (Math.floor(inputByteLength / 16) + 1) * 16;\n  return cipherTextLength;\n}\n\n/**\n * Calculate the base64 encoded string length for a given input length.\n * This is equivalent to the byte length when the string is ASCII or UTF8-8\n * encoded.\n * @param number\n */\nexport function getBase64OutputLength(inputByteLength: number) {\n  const encodedLength = Math.ceil(inputByteLength / 3) * 4;\n  return encodedLength;\n}\n\n/**\n * Query Strings\n * @private\n * @ignore\n */\n\nexport function updateQueryStringParameter(uri: string, key: string, value: string) {\n  const re = new RegExp(`([?&])${key}=.*?(&|$)`, 'i');\n  const separator = uri.indexOf('?') !== -1 ? '&' : '?';\n  if (uri.match(re)) {\n    return uri.replace(re, `$1${key}=${value}$2`);\n  } else {\n    return `${uri}${separator}${key}=${value}`;\n  }\n}\n\n/**\n * Versioning\n * @param {string} v1 - the left half of the version inequality\n * @param {string} v2 - right half of the version inequality\n * @returns {bool} iff v1 >= v2\n * @private\n * @ignore\n */\n\nexport function isLaterVersion(v1: string, v2: string) {\n  if (v1 === undefined || v1 === '') {\n    v1 = '0.0.0';\n  }\n\n  if (v2 === undefined || v1 === '') {\n    v2 = '0.0.0';\n  }\n\n  const v1tuple = v1.split('.').map(x => parseInt(x, 10));\n  const v2tuple = v2.split('.').map(x => parseInt(x, 10));\n\n  for (let index = 0; index < v2.length; index++) {\n    if (index >= v1.length) {\n      v2tuple.push(0);\n    }\n    if (v1tuple[index] < v2tuple[index]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * UUIDs\n * @private\n * @ignore\n */\nexport function makeUUID4() {\n  let d = new Date().getTime();\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    d += performance.now(); // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    const r = (d + Math.random() * 16) % 16 | 0;\n    d = Math.floor(d / 16);\n    return (c === 'x' ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\n/**\n * Checks if both urls pass the same origin check & are absolute\n * @param  {[type]}  uri1 first uri to check\n * @param  {[type]}  uri2 second uri to check\n * @return {Boolean} true if they pass the same origin check\n * @private\n * @ignore\n */\nexport function isSameOriginAbsoluteUrl(uri1: string, uri2: string) {\n  try {\n    const parsedUri1 = new URL(uri1);\n    const parsedUri2 = new URL(uri2);\n\n    const port1 =\n      parseInt(parsedUri1.port || '0', 10) | 0 || (parsedUri1.protocol === 'https:' ? 443 : 80);\n    const port2 =\n      parseInt(parsedUri2.port || '0', 10) | 0 || (parsedUri2.protocol === 'https:' ? 443 : 80);\n\n    const match = {\n      scheme: parsedUri1.protocol === parsedUri2.protocol,\n      hostname: parsedUri1.hostname === parsedUri2.hostname,\n      port: port1 === port2,\n      absolute:\n        (uri1.includes('http://') || uri1.includes('https://')) &&\n        (uri2.includes('http://') || uri2.includes('https://')),\n    };\n\n    return match.scheme && match.hostname && match.port && match.absolute;\n  } catch (error) {\n    console.log(error);\n    console.log('Parsing error in same URL origin check');\n    // Parse error\n    return false;\n  }\n}\n\n/**\n * Returns the global scope `Window`, `WorkerGlobalScope`, or `NodeJS.Global` if available in the\n * currently executing environment.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/self\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope\n *\n * This could be switched to `globalThis` once it is standardized and widely available.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/globalThis\n * @ignore\n */\nexport function getGlobalScope(): Window {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  // This function is meant to be called when accessing APIs that are typically only available in\n  // web-browser/DOM environments, but we also want to support situations where running in Node.js\n  // environment, and a polyfill was added to the Node.js `global` object scope without adding the\n  // `window` global object as well.\n  if (typeof global !== 'undefined') {\n    return global as unknown as Window;\n  }\n  throw new Error(\n    'Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available'\n  );\n}\n\nfunction getAPIUsageErrorMessage(\n  scopeObject: unknown,\n  apiName: string,\n  usageDesc?: string\n): string {\n  if (usageDesc) {\n    return `Use of '${usageDesc}' requires \\`${apiName}\\` which is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  } else {\n    return `\\`${apiName}\\` is unavailable on the '${scopeObject}' object within the currently executing environment.`;\n  }\n}\n\ninterface GetGlobalObjectOptions {\n  /**\n   * Throw an error if the object is not found.\n   * @default false\n   */\n  throwIfUnavailable?: boolean;\n  /**\n   * Additional information to include in an error if thrown.\n   */\n  usageDesc?: string;\n  /**\n   * If the object is not found, return an new empty object instead of undefined.\n   * Requires [[throwIfUnavailable]] to be falsey.\n   * @default false\n   */\n  returnEmptyObject?: boolean;\n}\n\n/**\n * Returns an object from the global scope (`Window` or `WorkerGlobalScope`) if it\n * is available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable and will be\n * `undefined` unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObject<K extends Extract<keyof Window, string>>(\n  name: K,\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Window[K] | undefined {\n  let globalScope: Window | undefined = undefined;\n  try {\n    globalScope = getGlobalScope();\n    if (globalScope) {\n      const obj = globalScope[name];\n      if (obj) {\n        return obj;\n      }\n    }\n  } catch (error) {\n    Logger.error(`Error getting object '${name}' from global scope '${globalScope}': ${error}`);\n  }\n  if (throwIfUnavailable) {\n    const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n    Logger.error(errMsg);\n    throw new Error(errMsg);\n  }\n  if (returnEmptyObject) {\n    return {} as any;\n  }\n  return undefined;\n}\n\n/**\n * Returns a specified subset of objects from the global scope (`Window` or `WorkerGlobalScope`)\n * if they are available within the currently executing environment.\n * When executing within the Node.js runtime these APIs are unavailable will be `undefined`\n * unless the API is provided via polyfill.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/self\n * @ignore\n */\nexport function getGlobalObjects<K extends Extract<keyof Window, string>>(\n  names: K[],\n  { throwIfUnavailable, usageDesc, returnEmptyObject }: GetGlobalObjectOptions = {}\n): Pick<Window, K> {\n  let globalScope: Window | undefined;\n  try {\n    globalScope = getGlobalScope();\n  } catch (error) {\n    Logger.error(`Error getting global scope: ${error}`);\n    if (throwIfUnavailable) {\n      const errMsg = getAPIUsageErrorMessage(globalScope, names[0].toString(), usageDesc);\n      Logger.error(errMsg);\n      throw errMsg;\n    } else if (returnEmptyObject) {\n      globalScope = {} as any;\n    }\n  }\n\n  const result: Pick<Window, K> = {} as any;\n  for (let i = 0; i < names.length; i++) {\n    const name = names[i];\n    try {\n      if (globalScope) {\n        const obj = globalScope[name];\n        if (obj) {\n          result[name] = obj;\n        } else if (throwIfUnavailable) {\n          const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n          Logger.error(errMsg);\n          throw new Error(errMsg);\n        } else if (returnEmptyObject) {\n          result[name] = {} as any;\n        }\n      }\n    } catch (error) {\n      if (throwIfUnavailable) {\n        const errMsg = getAPIUsageErrorMessage(globalScope, name.toString(), usageDesc);\n        Logger.error(errMsg);\n        throw new Error(errMsg);\n      }\n    }\n  }\n  return result;\n}\n// After removing bn.js library provide backward compatibility for users passing bn.js instance\ntype BN = import('bn.js'); // Type only import from @types/bn.js\nexport type IntegerType = number | string | bigint | Uint8Array | BN;\n\nexport function intToBytes(value: IntegerType, signed: boolean, byteLength: number): Uint8Array {\n  return bigIntToBytes(intToBigInt(value, signed), byteLength);\n}\n\nexport function intToBigInt(value: IntegerType, signed: boolean): bigint {\n  let parsedValue = value;\n\n  if (typeof parsedValue === 'number') {\n    if (!Number.isInteger(parsedValue)) {\n      throw new RangeError(`Invalid value. Values of type 'number' must be an integer.`);\n    }\n    if (parsedValue > Number.MAX_SAFE_INTEGER) {\n      throw new RangeError(\n        `Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`\n      );\n    }\n    return BigInt(parsedValue);\n  }\n  if (typeof parsedValue === 'string') {\n    // If hex string then convert to bytes then fall through to the bytes condition\n    if (parsedValue.toLowerCase().startsWith('0x')) {\n      // Trim '0x' hex-prefix\n      let hex = parsedValue.slice(2);\n\n      // Allow odd-length strings like `0xf` -- some libs output these, or even just `0x${num.toString(16)}`\n      hex = hex.padStart(hex.length + (hex.length % 2), '0');\n\n      parsedValue = hexToBytes(hex);\n    } else {\n      try {\n        return BigInt(parsedValue);\n      } catch (error) {\n        if (error instanceof SyntaxError) {\n          throw new RangeError(`Invalid value. String integer '${parsedValue}' is not finite.`);\n        }\n      }\n    }\n  }\n  if (typeof parsedValue === 'bigint') {\n    return parsedValue;\n  }\n  if (parsedValue instanceof Uint8Array) {\n    if (signed) {\n      // Allow byte arrays smaller than 128-bits to be passed.\n      // This allows positive signed ints like `0x08` (8) or negative signed\n      // ints like `0xf8` (-8) to be passed without having to pad to 16 bytes.\n      const bn = fromTwos(\n        BigInt(`0x${bytesToHex(parsedValue)}`),\n        BigInt(parsedValue.byteLength * 8)\n      );\n      return BigInt(bn.toString());\n    } else {\n      return BigInt(`0x${bytesToHex(parsedValue)}`);\n    }\n  }\n  // After removing bn.js library provide backward compatibility for users passing bn.js instance\n  // For backward compatibility with bn.js check if it's a bn.js instance\n  if (\n    parsedValue != null &&\n    typeof parsedValue === 'object' &&\n    parsedValue.constructor.name === 'BN'\n  ) {\n    return BigInt(parsedValue.toString());\n  }\n  throw new TypeError(\n    `Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.`\n  );\n}\n\nexport function with0x(value: string): string {\n  return value.startsWith('0x') ? value : `0x${value}`;\n}\n\n/**\n * Converts hex input string to bigint\n * @param hex - hex input string without 0x prefix and in big endian format\n * @example \"6c7cde4d702830c1db34ef7c19e2776f59107afef39084776fc88bc78dbb9656\"\n * @ignore\n */\nexport function hexToBigInt(hex: string): bigint {\n  if (typeof hex !== 'string')\n    throw new TypeError(`hexToBigInt: expected string, got ${typeof hex}`);\n  // Big Endian\n  return BigInt(`0x${hex}`);\n}\n\n/**\n * Converts IntegerType to hex string\n * @ignore\n */\nexport function intToHex(integer: IntegerType, lengthBytes = 8): string {\n  const value = typeof integer === 'bigint' ? integer : intToBigInt(integer, false);\n  return value.toString(16).padStart(lengthBytes * 2, '0');\n}\n\n/**\n * Converts hex string to integer\n * @ignore\n */\nexport function hexToInt(hex: string): number {\n  return parseInt(hex, 16);\n}\n\n/**\n * Converts bigint to byte array\n * @param value bigint value to be converted\n * @param length byte array optional length\n * @return {Uint8Array} byte array\n */\nexport function bigIntToBytes(value: bigint, length: number = 16): Uint8Array {\n  const hex = intToHex(value, length);\n  return hexToBytes(hex);\n}\n\n/**\n * Converts from signed number to two's complement\n * MIN_VALUE = -(1 << (width - 1))\n * MAX_VALUE =  (1 << (width - 1)) - 1\n * @ignore\n */\nexport function toTwos(value: bigint, width: bigint): bigint {\n  if (\n    value < -(BigInt(1) << (width - BigInt(1))) ||\n    (BigInt(1) << (width - BigInt(1))) - BigInt(1) < value\n  ) {\n    throw `Unable to represent integer in width: ${width}`;\n  }\n  if (value >= BigInt(0)) {\n    return BigInt(value);\n  }\n  return value + (BigInt(1) << width);\n}\n\n/**\n * Returns nth bit (right-to-left, zero-indexed)\n */\nfunction nthBit(value: bigint, n: bigint) {\n  return value & (BigInt(1) << n);\n}\n\n/**\n * Converts from two's complement to signed number\n * @ignore\n */\nexport function fromTwos(value: bigint, width: bigint) {\n  if (nthBit(value, width - BigInt(1))) {\n    return value - (BigInt(1) << width);\n  }\n  return value;\n}\n\n// The following methods are based on `@noble/hashes` implementation\n// https://github.com/paulmillr/noble-hashes\n// Copyright (c) 2022 Paul Miller (https://paulmillr.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the “Software”), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\nconst hexes = Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n\n/**\n * Converts bytes to the equivalent hex string\n * @example\n * ```\n * bytesToHex(Uint8Array.from([0xde, 0xad, 0xbe, 0xef])) // 'deadbeef'\n * ```\n */\nexport function bytesToHex(uint8a: Uint8Array): string {\n  // pre-caching improves the speed 6x\n  if (!(uint8a instanceof Uint8Array)) throw new Error('Uint8Array expected');\n  let hex = '';\n  for (const u of uint8a) {\n    hex += hexes[u];\n  }\n  return hex;\n}\n\n/**\n * Converts a hex string to the equivalent bytes\n * @example\n * ```\n * hexToBytes('deadbeef') // Uint8Array(4) [ 222, 173, 190, 239 ]\n * ```\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') {\n    throw new TypeError(`hexToBytes: expected string, got ${typeof hex}`);\n  }\n  const paddedHex = hex.length % 2 ? `0${hex}` : hex; // left pad with a zero if odd length\n  const array = new Uint8Array(paddedHex.length / 2);\n  for (let i = 0; i < array.length; i++) {\n    const j = i * 2;\n    const hexByte = paddedHex.slice(j, j + 2);\n    const byte = Number.parseInt(hexByte, 16);\n    if (Number.isNaN(byte) || byte < 0) throw new Error('Invalid byte sequence');\n    array[i] = byte;\n  }\n  return array;\n}\n\ndeclare const TextEncoder: any;\ndeclare const TextDecoder: any;\n\n/**\n * Converts a UTF-8 string to the equivalent bytes\n * @example\n * ```\n * utf8ToBytes('stacks Ӿ'); // Uint8Array(9) [ 115, 116, 97, 99, 107, 115, 32, 211, 190 ];\n * ```\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  return new TextEncoder().encode(str);\n}\n\n/**\n * Converts bytes to the equivalent UTF-8 string\n * @example\n * ```\n * bytesToUtf8(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 211, 190])); // 'stacks Ӿ'\n * ```\n */\nexport function bytesToUtf8(arr: Uint8Array): string {\n  return new TextDecoder().decode(arr);\n}\n\n/**\n * Converts an ASCII string to the equivalent bytes\n * @example\n * ```\n * asciiToBytes('stacks $'); // Uint8Array(8) [ 115, 116, 97, 99, 107, 115, 32, 36 ]\n * ```\n */\nexport function asciiToBytes(str: string) {\n  const byteArray = [];\n  for (let i = 0; i < str.length; i++) {\n    byteArray.push(str.charCodeAt(i) & 0xff); // ignore second bytes of UTF-16 character\n  }\n  return new Uint8Array(byteArray);\n}\n\n/**\n * Converts bytes to the equivalent ASCII string\n * @example\n * ```\n * bytesToAscii(Uint8Array.from([115, 116, 97, 99, 107, 115, 32, 36])); // 'stacks $'\n * ```\n */\nexport function bytesToAscii(arr: Uint8Array) {\n  return String.fromCharCode.apply(null, arr as any as number[]);\n}\n\nfunction isNotOctet(octet: number) {\n  return !Number.isInteger(octet) || octet < 0 || octet > 255;\n}\n\n/** @ignore */\nexport function octetsToBytes(numbers: number[]) {\n  if (numbers.some(isNotOctet)) throw new Error('Some values are invalid bytes.');\n  return new Uint8Array(numbers);\n}\n\n/** @ignore */\nexport function toBytes(data: Uint8Array | string): Uint8Array {\n  if (typeof data === 'string') return utf8ToBytes(data);\n  if (data instanceof Uint8Array) return data;\n  throw new TypeError(`Expected input type is (Uint8Array | string) but got (${typeof data})`);\n}\n\n/**\n * Concats Uint8Array-s into one; like `Buffer.concat([buf1, buf2])`\n * @example concatBytes(buf1, buf2)\n * @ignore\n */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  if (!arrays.every(a => a instanceof Uint8Array)) throw new Error('Uint8Array list expected');\n  if (arrays.length === 1) return arrays[0];\n  const length = arrays.reduce((a, arr) => a + arr.length, 0);\n  const result = new Uint8Array(length);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const arr = arrays[i];\n    result.set(arr, pad);\n    pad += arr.length;\n  }\n  return result;\n}\n\n/** @ignore */\nexport function concatArray(elements: (Uint8Array | number[] | number)[]) {\n  return concatBytes(\n    ...elements.map(e => {\n      if (typeof e === 'number') return octetsToBytes([e]);\n      if (e instanceof Array) return octetsToBytes(e);\n      return e;\n    })\n  );\n}\n\n/**\n * Better `instanceof` check for types in different environments\n * @ignore\n */\nexport function isInstance(object: any, type: any) {\n  return object instanceof type || object?.constructor?.name?.toLowerCase() === type.name;\n}\n","import { UserSession } from '@stacks/auth';\nimport type { AuthOptions } from '../types/auth';\nimport {\n  PostConditionMode,\n  PostCondition,\n  AnchorMode,\n  ClarityValue,\n  StacksTransaction,\n} from '@stacks/transactions';\nimport { StacksNetwork } from '@stacks/network';\n\nexport interface TxBase {\n  appDetails?: AuthOptions['appDetails'];\n  postConditionMode?: PostConditionMode;\n  postConditions?: (string | PostCondition)[];\n  network?: StacksNetwork;\n  anchorMode?: AnchorMode;\n  attachment?: string;\n  fee?: number | string;\n  /**\n   * Provide the Hiro Wallet with a suggested account to sign this transaction with.\n   * This is set by default if a `userSession` option is provided.\n   */\n  stxAddress?: string;\n  /** @deprecated `unused - only included for compatibility with @stacks/transactions` */\n  senderKey?: string;\n  /** @deprecated `unused - only included for compatibility with @stacks/transactions` */\n  nonce?: number;\n}\n\nexport interface SignTransactionBase {\n  appDetails?: AuthOptions['appDetails'];\n  network?: StacksNetwork;\n  attachment?: string;\n  /**\n   * Provide wallets with a suggested account to sign this transaction with.\n   * This is set by default if a `userSession` option is provided.\n   */\n  stxAddress?: string;\n  txHex: string;\n  /** @deprecated `unused - only included for compatibility with other transaction types` */\n  postConditions?: (string | PostCondition)[];\n}\n\nexport interface SponsoredFinishedTxPayload {\n  txRaw: string;\n}\n\nexport interface SponsoredFinishedTxData extends SponsoredFinishedTxPayload {\n  stacksTransaction: StacksTransaction;\n}\n\nexport interface FinishedTxPayload extends SponsoredFinishedTxPayload {\n  txId: string;\n}\n\nexport interface FinishedTxData extends FinishedTxPayload {\n  stacksTransaction: StacksTransaction;\n}\n\nexport enum TransactionTypes {\n  ContractCall = 'contract_call',\n  ContractDeploy = 'smart_contract',\n  STXTransfer = 'token_transfer',\n}\n\n/**\n * Contract Call\n */\n\nexport enum ContractCallArgumentType {\n  BUFFER = 'buffer',\n  UINT = 'uint',\n  INT = 'int',\n  PRINCIPAL = 'principal',\n  BOOL = 'bool',\n}\n\nexport interface ContractCallBase extends TxBase {\n  contractAddress: string;\n  contractName: string;\n  functionName: string;\n  functionArgs: (string | ClarityValue)[];\n}\n\nexport interface OptionsBase {\n  /**\n   * @deprecated Authentication is no longer supported through a hosted\n   * version. Users must install an extension.\n   */\n  authOrigin?: string;\n  userSession?: UserSession;\n}\n\nexport type SponsoredFinished = (data: SponsoredFinishedTxData) => void;\nexport type Finished = (data: FinishedTxData) => void;\nexport type Canceled = () => void;\n\nexport interface SponsoredOptionsBase extends TxBase, OptionsBase {\n  sponsored: true;\n  onFinish?: SponsoredFinished;\n  onCancel?: Canceled;\n}\n\nexport interface RegularOptionsBase extends TxBase, OptionsBase {\n  sponsored?: false;\n  onFinish?: Finished;\n  onCancel?: Canceled;\n}\n\nexport type ContractCallRegularOptions = ContractCallBase & RegularOptionsBase;\nexport type ContractCallSponsoredOptions = ContractCallBase & SponsoredOptionsBase;\nexport type ContractCallOptions = ContractCallRegularOptions | ContractCallSponsoredOptions;\n\nexport interface ContractCallArgument {\n  type: ContractCallArgumentType;\n  value: string;\n}\n\nexport interface ContractCallPayload extends ContractCallBase {\n  txType: TransactionTypes.ContractCall;\n  publicKey: string;\n  functionArgs: string[];\n  sponsored?: boolean;\n}\n\n/**\n * Contract Deploy\n */\nexport interface ContractDeployBase extends TxBase {\n  contractName: string;\n  codeBody: string;\n}\n\nexport type ContractDeployRegularOptions = ContractDeployBase & RegularOptionsBase;\nexport type ContractDeploySponsoredOptions = ContractDeployBase & SponsoredOptionsBase;\nexport type ContractDeployOptions = ContractDeployRegularOptions | ContractDeploySponsoredOptions;\n\nexport interface ContractDeployPayload extends ContractDeployBase {\n  publicKey: string;\n  txType: TransactionTypes.ContractDeploy;\n  sponsored?: boolean;\n}\n\n/**\n * STX Transfer\n */\n\nexport interface STXTransferBase extends TxBase {\n  recipient: string;\n  amount: BigInt | string;\n  memo?: string;\n}\n\nexport type STXTransferRegularOptions = STXTransferBase & RegularOptionsBase;\nexport type STXTransferSponsoredOptions = STXTransferBase & SponsoredOptionsBase;\nexport type STXTransferOptions = STXTransferRegularOptions | STXTransferSponsoredOptions;\n\nexport interface STXTransferPayload extends STXTransferBase {\n  publicKey: string;\n  txType: TransactionTypes.STXTransfer;\n  amount: string;\n  sponsored?: boolean;\n}\n\n/**\n * Transaction Popup\n */\n\nexport type TransactionOptions =\n  | ContractCallOptions\n  | ContractDeployOptions\n  | STXTransferOptions\n  | SignTransactionOptions;\nexport type TransactionPayload =\n  | ContractCallPayload\n  | ContractDeployPayload\n  | STXTransferPayload\n  | SignTransactionPayload;\n\nexport interface TransactionPopup {\n  token: string;\n  options: TransactionOptions;\n}\n\nexport interface SignTransactionOptionBase extends SignTransactionBase, OptionsBase {\n  onFinish?: SignTransactionFinished;\n  onCancel?: Canceled;\n}\n\nexport interface SignTransactionPayload extends SignTransactionBase {\n  publicKey: string;\n}\n\nexport type SignTransactionFinished = (data: SignTransactionFinishedTxData) => void;\n\nexport type SignTransactionOptions = SignTransactionOptionBase;\n\nexport interface SignTransactionFinishedTxData {\n  stacksTransaction: StacksTransaction;\n}\n","import { StacksTestnet } from '@stacks/network';\nimport { ChainID } from '@stacks/transactions';\nimport { createUnsecuredToken, TokenSigner } from 'jsontokens';\nimport { getKeys, getUserSession, hasAppPrivateKey } from '../transactions';\nimport {\n  CommonSignatureRequestOptions,\n  SignatureOptions,\n  SignaturePayload,\n  SignaturePopup,\n  SignatureRequestOptions,\n} from '../types/signature';\nimport { getStacksProvider } from '../utils';\nimport { StacksProvider } from '../types';\n\nfunction getStxAddress(options: CommonSignatureRequestOptions) {\n  const { userSession, network } = options;\n\n  if (!userSession || !network) return undefined;\n  const stxAddresses = userSession?.loadUserData().profile?.stxAddress;\n  const chainIdToKey = {\n    [ChainID.Mainnet]: 'mainnet',\n    [ChainID.Testnet]: 'testnet',\n  };\n  const address: string | undefined = stxAddresses?.[chainIdToKey[network.chainId]];\n  return address;\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nasync function signPayload(payload: SignaturePayload, privateKey: string) {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return tokenSigner.signAsync({ ...payload } as any);\n}\n\nexport function getDefaultSignatureRequestOptions(options: CommonSignatureRequestOptions) {\n  const network = options.network || new StacksTestnet();\n  const userSession = getUserSession(options.userSession);\n  const defaults: CommonSignatureRequestOptions = {\n    ...options,\n    network,\n    userSession,\n  };\n  return {\n    stxAddress: getStxAddress(defaults),\n    ...defaults,\n  };\n}\n\nasync function openSignaturePopup({ token, options }: SignaturePopup, provider: StacksProvider) {\n  try {\n    const signatureResponse = await provider.signatureRequest(token);\n    options.onFinish?.(signatureResponse);\n  } catch (error) {\n    console.error('[Connect] Error during signature request', error);\n    options.onCancel?.();\n  }\n}\n\nexport interface SignatureRequestPayload {\n  message: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const signMessage = async (options: SignatureRequestOptions) => {\n  const { userSession, ..._options } = options;\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n\n    const payload: SignaturePayload = {\n      ..._options,\n      publicKey,\n    };\n\n    return signPayload(payload, privateKey);\n  }\n  const payload = { ..._options };\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return createUnsecuredToken(payload as any);\n};\n\nasync function generateTokenAndOpenPopup<T extends SignatureOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>,\n  provider: StacksProvider\n) {\n  const token = await makeTokenFn({\n    ...getDefaultSignatureRequestOptions(options),\n    ...options,\n  } as T);\n  return openSignaturePopup({ token, options }, provider);\n}\n\nexport function openSignatureRequestPopup(\n  options: SignatureRequestOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, signMessage, provider);\n}\n","import { bytesToHex } from '@stacks/common';\nimport { serializeCV } from '@stacks/transactions';\nimport { createUnsecuredToken, TokenSigner } from 'jsontokens';\nimport { getDefaultSignatureRequestOptions } from '.';\nimport { getKeys, hasAppPrivateKey } from '../transactions';\nimport {\n  StructuredDataSignatureOptions,\n  StructuredDataSignaturePayload,\n  StructuredDataSignaturePopup,\n  StructuredDataSignatureRequestOptions,\n} from '../types/structuredDataSignature';\nimport { getStacksProvider } from '../utils';\nimport { StacksProvider } from '../types';\n\nasync function generateTokenAndOpenPopup<T extends StructuredDataSignatureOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>,\n  provider: StacksProvider\n) {\n  const token = await makeTokenFn({\n    ...getDefaultSignatureRequestOptions(options),\n    ...options,\n  } as T);\n  return openStructuredDataSignaturePopup({ token, options }, provider);\n}\n\nfunction parseUnserializableBigIntValues(payload: any) {\n  return {\n    ...payload,\n    message: bytesToHex(serializeCV(payload.message)),\n    domain: bytesToHex(serializeCV(payload.domain)),\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nasync function signPayload(payload: StructuredDataSignaturePayload, privateKey: string) {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  return tokenSigner.signAsync(parseUnserializableBigIntValues(payload));\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport async function signStructuredMessage(options: StructuredDataSignatureRequestOptions) {\n  const { userSession, ..._options } = options;\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n    const payload: StructuredDataSignaturePayload = {\n      ..._options,\n      publicKey,\n    };\n    return signPayload(payload, privateKey);\n  }\n  // Type casting `any` as payload contains non-serialisable content,\n  // such as `StacksNetwork`\n  return createUnsecuredToken(parseUnserializableBigIntValues(options));\n}\n\nasync function openStructuredDataSignaturePopup(\n  { token, options }: StructuredDataSignaturePopup,\n  provider: StacksProvider\n) {\n  try {\n    const signatureResponse = await provider.structuredDataSignatureRequest(token);\n\n    options.onFinish?.(signatureResponse);\n  } catch (error) {\n    console.error('[Connect] Error during signature request', error);\n    options.onCancel?.();\n  }\n}\n\nexport function openStructuredDataSignatureRequestPopup(\n  options: StructuredDataSignatureRequestOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, signStructuredMessage, provider);\n}\n","import { StacksTestnet } from '@stacks/network';\nimport { createUnsecuredToken, Json, TokenSigner } from 'jsontokens';\nimport { getKeys, getUserSession, hasAppPrivateKey } from '../transactions';\nimport {\n  ProfileUpdatePayload,\n  ProfileUpdatePopup,\n  ProfileUpdateRequestOptions,\n  StacksProvider,\n} from '../types';\n\nimport { getStacksProvider } from '../utils';\n\n// eslint-disable-next-line @typescript-eslint/require-await\nasync function signPayload(payload: ProfileUpdatePayload, privateKey: string) {\n  const tokenSigner = new TokenSigner('ES256k', privateKey);\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n  return tokenSigner.signAsync({ ...payload } as any);\n}\n\nexport function getDefaultProfileUpdateRequestOptions(options: ProfileUpdateRequestOptions) {\n  const network = options.network || new StacksTestnet();\n  const userSession = getUserSession(options.userSession);\n  const defaults: ProfileUpdateRequestOptions = {\n    ...options,\n    network,\n    userSession,\n  };\n  return {\n    ...defaults,\n  };\n}\n\nasync function openProfileUpdatePopup(\n  { token, options }: ProfileUpdatePopup,\n  provider: StacksProvider\n) {\n  try {\n    const profileUpdateResponse = await provider.profileUpdateRequest(token);\n    options.onFinish?.(profileUpdateResponse);\n  } catch (error) {\n    console.error('[Connect] Error during signature request', error);\n    options.onCancel?.();\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/require-await\nexport const makeProfileUpdateToken = async (options: ProfileUpdateRequestOptions) => {\n  const { userSession, profile, ..._options } = options;\n  if (hasAppPrivateKey(userSession)) {\n    const { privateKey, publicKey } = getKeys(userSession);\n\n    const payload: ProfileUpdatePayload = {\n      ..._options,\n      profile,\n      publicKey,\n    };\n\n    return signPayload(payload, privateKey);\n  }\n  const payload = { ..._options };\n  return createUnsecuredToken(payload as Json);\n};\n\nasync function generateTokenAndOpenPopup<T extends ProfileUpdateRequestOptions>(\n  options: T,\n  makeTokenFn: (options: T) => Promise<string>,\n  provider: StacksProvider\n) {\n  const token = await makeTokenFn({\n    ...getDefaultProfileUpdateRequestOptions(options),\n    ...options,\n  } as T);\n  return openProfileUpdatePopup({ token, options }, provider);\n}\n\nexport function openProfileUpdateRequestPopup(\n  options: ProfileUpdateRequestOptions,\n  provider: StacksProvider = getStacksProvider()\n) {\n  if (!provider) throw new Error('[Connect] No installed Stacks wallet found');\n  return generateTokenAndOpenPopup(options, makeProfileUpdateToken, provider);\n}\n","import { UserSession } from '@stacks/auth';\nimport { StacksNetwork } from '@stacks/network';\n\nimport { AuthOptions } from './auth';\n\n// Taken from @scure/btc-signer\n// https://github.com/paulmillr/scure-btc-signer\nexport enum SignatureHash {\n  DEFAULT = 0,\n  ALL = 1,\n  NONE = 2,\n  SINGLE = 3,\n  ANYONECANPAY = 0x80,\n}\n\nexport interface PsbtData {\n  hex: string;\n}\n\nexport type PsbtCanceled = () => void;\nexport type PsbtFinished = (data: PsbtData) => void;\n\nexport interface PsbtBase {\n  appDetails?: AuthOptions['appDetails'];\n  authOrigin?: string;\n  network?: StacksNetwork;\n  onCancel?: PsbtCanceled;\n  onFinish?: PsbtFinished;\n  stxAddress?: string;\n  userSession?: UserSession;\n}\n\nexport interface PsbtRequestOptions extends PsbtBase {\n  allowedSighash?: SignatureHash[];\n  hex: string;\n  signAtIndex?: number | number[];\n}\n\nexport interface CommonPsbtPayload extends PsbtBase {\n  publicKey: string;\n}\n\nexport interface PsbtPayload extends CommonPsbtPayload {\n  allowedSighash?: SignatureHash[];\n  hex: string;\n  signAtIndex?: number | number[];\n}\n\n/**\n * Psbt Popup\n */\nexport interface PsbtPopup {\n  token: string;\n  options: PsbtRequestOptions;\n}\n","import {\n  WebBTCProvider,\n  clearSelectedProviderId,\n  getInstalledProviders,\n  getSelectedProviderId,\n} from '@stacks/connect-ui';\nimport { defineCustomElements } from '@stacks/connect-ui/loader';\nimport { authenticate } from './auth';\nimport { openPsbtRequestPopup } from './bitcoin';\nimport { openProfileUpdateRequestPopup } from './profile';\nimport { openSignatureRequestPopup } from './signature';\nimport { openStructuredDataSignatureRequestPopup } from './signature/structuredData';\nimport {\n  openContractCall,\n  openContractDeploy,\n  openSTXTransfer,\n  openSignTransaction,\n} from './transactions';\nimport {\n  ContractCallOptions,\n  ContractDeployOptions,\n  ProfileUpdateRequestOptions,\n  PsbtRequestOptions,\n  STXTransferOptions,\n  SignatureRequestOptions,\n  StacksProvider,\n  StructuredDataSignatureRequestOptions,\n  TransactionOptions,\n} from './types';\nimport type { AuthOptions } from './types/auth';\nimport { getStacksProvider } from './utils';\nimport { DEFAULT_PROVIDERS } from './providers';\n\nexport type ActionOptions = (\n  | AuthOptions\n  | STXTransferOptions\n  | ContractCallOptions\n  | ContractDeployOptions\n  | TransactionOptions\n  | PsbtRequestOptions\n  | ProfileUpdateRequestOptions\n  | SignatureRequestOptions\n  | StructuredDataSignatureRequestOptions\n) & {\n  defaultProviders?: WebBTCProvider[];\n};\n\n/** Helper higher-order function for creating connect methods that allow for wallet selection */\nfunction wrapConnectCall<O extends ActionOptions>(\n  action: (options: O, provider?: StacksProvider) => any,\n  persistSelection = true\n) {\n  return function wrapped(options: O, provider?: StacksProvider) {\n    if (provider) return action(options, provider); // if a provider is passed, use it\n\n    const selectedId = getSelectedProviderId();\n    const selectedProvider = getStacksProvider();\n    if (selectedId && selectedProvider) return action(options, selectedProvider); // if a provider is selected, use it\n\n    if (typeof window === 'undefined') return;\n    void defineCustomElements(window);\n\n    const defaultProviders = options?.defaultProviders ?? DEFAULT_PROVIDERS;\n    const installedProviders = getInstalledProviders(defaultProviders);\n\n    const element = document.createElement('connect-modal');\n    element.defaultProviders = defaultProviders;\n    element.installedProviders = installedProviders;\n    element.persistSelection = persistSelection;\n\n    const originalOverflow = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n\n    const closeModal = () => {\n      element.remove();\n      document.body.style.overflow = originalOverflow;\n    };\n\n    element.callback = (selectedProvider: StacksProvider | undefined) => {\n      closeModal();\n      action(options, selectedProvider);\n    };\n    element.cancelCallback = () => {\n      closeModal();\n      options.onCancel?.();\n    };\n\n    document.body.appendChild(element);\n\n    const handleEsc = (ev: KeyboardEvent) => {\n      if (ev.key === 'Escape') {\n        document.removeEventListener('keydown', handleEsc);\n        element.remove();\n      }\n    };\n    document.addEventListener('keydown', handleEsc);\n  };\n}\n\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link authenticate} action. */\nexport const showConnect = wrapConnectCall(authenticate, false);\n\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openSTXTransfer} action. */\nexport const showSTXTransfer = wrapConnectCall(openSTXTransfer);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openContractCall} action. */\nexport const showContractCall = wrapConnectCall(openContractCall);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openContractDeploy} action. */\nexport const showContractDeploy = wrapConnectCall(openContractDeploy);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openSignTransaction} action. */\nexport const showSignTransaction = wrapConnectCall(openSignTransaction);\n\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openPsbtRequestPopup} action. */\nexport const showPsbt = wrapConnectCall(openPsbtRequestPopup);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openProfileUpdateRequestPopup} action. */\nexport const showProfileUpdate = wrapConnectCall(openProfileUpdateRequestPopup);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openSignatureRequestPopup} action. */\nexport const showSignMessage = wrapConnectCall(openSignatureRequestPopup);\n/** A wrapper for selecting a wallet (if none is selected) and then calling the {@link openStructuredDataSignatureRequestPopup} action. */\nexport const showSignStructuredMessage = wrapConnectCall(openStructuredDataSignatureRequestPopup);\n\n/** Disconnect selected wallet. Alias for {@link clearSelectedProviderId} */\nexport const disconnect = clearSelectedProviderId;\n\n/**\n * @deprecated Use the renamed {@link showConnect} method\n */\nexport const showBlockstackConnect = showConnect;\n","import { WebBTCProvider } from '@stacks/connect-ui';\n\nexport const DEFAULT_PROVIDERS: WebBTCProvider[] = [\n  {\n    id: 'LeatherProvider',\n    name: 'Leather',\n    icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iMjYuODM4NyIgZmlsbD0iIzEyMTAwRiIvPgo8cGF0aCBkPSJNNzQuOTE3MSA1Mi43MTE0QzgyLjQ3NjYgNTEuNTQwOCA5My40MDg3IDQzLjU4MDQgOTMuNDA4NyAzNy4zNzYxQzkzLjQwODcgMzUuNTAzMSA5MS44OTY4IDM0LjIxNTQgODkuNjg3MSAzNC4yMTU0Qzg1LjUwMDQgMzQuMjE1NCA3OC40MDYxIDQwLjUzNjggNzQuOTE3MSA1Mi43MTE0Wk0zOS45MTEgODMuNDk5MUMzMC4wMjU2IDgzLjQ5OTEgMjkuMjExNSA5My4zMzI0IDM5LjA5NjkgOTMuMzMyNEM0My41MTYzIDkzLjMzMjQgNDguODY2MSA5MS41NzY0IDUxLjY1NzMgODguNDE1N0M0Ny41ODY4IDg0LjkwMzggNDQuMjE0MSA4My40OTkxIDM5LjkxMSA4My40OTkxWk0xMDIuODI5IDc5LjI4NDhDMTAzLjQxIDk1Ljc5MDcgOTUuMDM2OSAxMDUuMDM5IDgwLjg0ODQgMTA1LjAzOUM3Mi40NzQ4IDEwNS4wMzkgNjguMjg4MSAxMDEuODc4IDU5LjMzMyA5Ni4wMjQ5QzU0LjY4MSAxMDEuMTc2IDQ1Ljg0MjMgMTA1LjAzOSAzOC41MTU0IDEwNS4wMzlDMTMuMjc4NSAxMDUuMDM5IDE0LjMyNTIgNzIuODQ2MyA0MC4wMjczIDcyLjg0NjNDNDUuMzc3MSA3Mi44NDYzIDQ5LjkxMjggNzQuMjUxMSA1NS43Mjc3IDc3Ljg4TDU5LjU2NTYgNjQuNDE3N0M0My43NDg5IDYwLjA4NjQgMzUuODQwNSA0Ny45MTE4IDQzLjYzMjYgMzAuNDY5M0g1Ni4xOTI5QzQ5LjIxNSA0Mi4wNTg2IDUzLjk4MzIgNTEuNjU3OCA2Mi44MjIgNTIuNzExNEM2Ny41OTAzIDM1LjczNzIgNzcuODI0NiAyMi41MDkgOTEuNDMxNiAyMi41MDlDOTkuMTA3NCAyMi41MDkgMTA1LjE1NSAyNy41NDI4IDEwNS4xNTUgMzYuNjczN0MxMDUuMTU1IDUxLjMwNjYgODYuMDgxOSA2My4yNDcxIDcxLjY2MDcgNjQuNDE3N0w2NS43Mjk1IDg1LjM3MjFDNzIuNDc0OCA5My4yMTUzIDkxLjE5OSAxMDAuODI0IDkxLjE5OSA3OS4yODQ4SDEwMi44MjlaIiBmaWxsPSIjRjVGMUVEIi8+Cjwvc3ZnPgo=',\n\n    webUrl: 'https://leather.io',\n    chromeWebStoreUrl:\n      'https://chrome.google.com/webstore/detail/hiro-wallet/ldinpeekobnhjjdofggfgjlcehhmanlj',\n    mozillaAddOnsUrl: 'https://leather.io/install-extension',\n  },\n  {\n    id: 'XverseProviders.StacksProvider',\n    name: 'Xverse Wallet',\n    icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiMxNzE3MTciIGQ9Ik0wIDBoNjAwdjYwMEgweiIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTQ0MCA0MzUuNHYtNTFjMC0yLS44LTMuOS0yLjItNS4zTDIyMCAxNjIuMmE3LjYgNy42IDAgMCAwLTUuNC0yLjJoLTUxLjFjLTIuNSAwLTQuNiAyLTQuNiA0LjZ2NDcuM2MwIDIgLjggNCAyLjIgNS40bDc4LjIgNzcuOGE0LjYgNC42IDAgMCAxIDAgNi41bC03OSA3OC43Yy0xIC45LTEuNCAyLTEuNCAzLjJ2NTJjMCAyLjQgMiA0LjUgNC42IDQuNUgyNDljMi42IDAgNC42LTIgNC42LTQuNlY0MDVjMC0xLjIuNS0yLjQgMS40LTMuM2w0Mi40LTQyLjJhNC42IDQuNiAwIDAgMSA2LjQgMGw3OC43IDc4LjRhNy42IDcuNiAwIDAgMCA1LjQgMi4yaDQ3LjVjMi41IDAgNC42LTIgNC42LTQuNloiLz48cGF0aCBmaWxsPSIjRUU3QTMwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0zMjUuNiAyMjcuMmg0Mi44YzIuNiAwIDQuNiAyLjEgNC42IDQuNnY0Mi42YzAgNCA1IDYuMSA4IDMuMmw1OC43LTU4LjVjLjgtLjggMS4zLTIgMS4zLTMuMnYtNTEuMmMwLTIuNi0yLTQuNi00LjYtNC42TDM4NCAxNjBjLTEuMiAwLTIuNC41LTMuMyAxLjNsLTU4LjQgNTguMWE0LjYgNC42IDAgMCAwIDMuMiA3LjhaIi8+PC9nPjwvc3ZnPg==',\n\n    webUrl: 'https://xverse.app',\n    chromeWebStoreUrl:\n      'https://chrome.google.com/webstore/detail/xverse-wallet/idnnbdplmphpflfnlkomgpfbpcgelopg',\n    googlePlayStoreUrl: 'https://play.google.com/store/apps/details?id=com.secretkeylabs.xverse',\n    iOSAppStoreUrl: 'https://apps.apple.com/app/xverse-bitcoin-web3-wallet/id1552272513',\n    mozillaAddOnsUrl: 'https://www.xverse.app/download',\n  },\n  {\n    id: 'AsignaProvider',\n    name: 'Asigna',\n    icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMDEwMCIgZD0iTTAgMGgzMnYzMkgweiIvPjxwYXRoIGZpbGw9InVybCgjYSkiIGQ9Ik0xNS4xMSA1LjU1YTMgMyAwIDAgMC0xLjgyIDEuM2wtLjA1LjA4LS40My43Mi0uMDcuMTEtLjUuODUtLjA1LjA5LTEuMjkgMi4xOC0uMDQuMDctLjQ3LjgtLjA2LjEtLjQ2Ljc4LS4wNy4xMS0xLjYzIDIuNzYtLjA3LjExLS4zOC42Ni0uMDUuMDgtLjczIDEuMjQtLjM1LjYtLjQuNjctLjA1LjA5TDUuMSAyMC43bC0uMTEuMTgtLjE0LjIzLS4wNy4xMy0uMzMuNTUtLjA0LjA3di4wMWExLjI2IDEuMjYgMCAwIDAtLjE0LjQ3IDEuMzEgMS4zMSAwIDAgMCAxLjI0IDEuNGgxLjVsLjA1LS4wNi4wNC0uMDYuODctMS4yMS4wNS0uMDguNzctMS4wNy4wNS0uMDcuNC0uNTcuMDUtLjA2LjI0LS4zNGExLjUyIDEuNTIgMCAwIDEgMS4zOS0uNjIgMS41IDEuNSAwIDAgMSAuNjQuMiAxLjQ3IDEuNDcgMCAwIDEgLjczIDEuMjcgMS40NCAxLjQ0IDAgMCAxLS4yNy44NGwtLjYzLjg4LS4wNS4wNy0uMzIuNDUtLjA2LjA4LS4wOC4xMi0uMTIuMTYtLjA1LjA4aDIuMTNhMi4zMiAyLjMyIDAgMCAwIDEuNzctLjk2bDEuMTgtMS42My43Ny0xLjA4IDEuMy0xLjhhMS4yNCAxLjI0IDAgMCAxIC41NS0uNDNsLjA4LS4wM2ExLjMgMS4zIDAgMCAxIC4zLS4wNiAxLjI4IDEuMjggMCAwIDEgMS4xNS41NGwuMTEuMmExLjEzIDEuMTMgMCAwIDEgLjEuNDEgMS4xOSAxLjE5IDAgMCAxLS4yMy43N2wtLjAzLjA1LS41Ny44LS43Ljk4LS4yNy4zN2ExLjIyIDEuMjIgMCAwIDAtLjIuNSAxLjA1IDEuMDUgMCAwIDAtLjAyLjIzdi4wNmExLjE3IDEuMTcgMCAwIDAgLjE0LjQzbC4wMi4wNS4wNy4xYTEuNDQgMS40NCAwIDAgMCAuMS4xMWwuMDUuMDYuMDEuMDFhMS44IDEuOCAwIDAgMCAuMTQuMWMwIC4wMi4wMi4wMy4wNC4wM2ExIDEgMCAwIDAgLjA4LjA1bC4wNy4wNGExLjI1IDEuMjUgMCAwIDAgLjUuMWg2LjljLjEgMCAuMi0uMDEuMjktLjAzbC4wNi0uMDJhMS4yNyAxLjI3IDAgMCAwIC4yNy0uMS41Ny41NyAwIDAgMCAuMDctLjAzIDEuMjEgMS4yMSAwIDAgMCAuMjYtLjE5bC4wOC0uMDdhLjkyLjkyIDAgMCAwIC4xNS0uMTkgMS41NSAxLjU1IDAgMCAwIC4wOS0uMTdsLjAyLS4wNWExLjIyIDEuMjIgMCAwIDAgLjA4LS4yNnYtLjA0bC4wMi0uMDh2LS4wOGExLjMyIDEuMzIgMCAwIDAtLjItLjc0bC0xLjYtMi42NC0uMDYtLjEtLjItLjMyLS4zMy0uNTR2LS4wMWwtLjA1LS4wOC0xLjMtMi4xNS0uMDctLjEtLjA0LS4wNi0uOC0xLjMyLS4wNC0uMDctLjItLjM0LS4xLS4xNC0uMS0uMTYtLjUzLS45LS4xMy0uMi0uMDktLjE0LTIuMTctMy41Ny0uMDQtLjA3LS43Mi0xLjE5LS4wNS0uMDctLjQtLjY1YTIuNjUgMi42NSAwIDAgMC0uMy0uNCAyLjk2IDIuOTYgMCAwIDAtLjk3LS43NCAzLjA0IDMuMDQgMCAwIDAtMS4zLS4zYy0uMjUgMC0uNS4wNC0uNzQuMVoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMTkgMTYuM2E1LjQ1IDUuNDUgMCAwIDAtLjgzIDEuNTZsLS4wNC4xNWExLjM2IDEuMzYgMCAwIDEgLjI4LS4xNiAxLjI0IDEuMjQgMCAwIDEgLjM4LS4wOGguMWExLjI4IDEuMjggMCAwIDEgMS4wNS41NGMuMDQuMDYuMDguMTMuMS4yYTEuMjQgMS4yNCAwIDAgMSAuMDkuMjcgMS4xOSAxLjE5IDAgMCAxLS4yLjkxbC0uMDQuMDUtLjU3Ljc5LS43Ljk5LS4yNy4zN2ExLjIzIDEuMjMgMCAwIDAtLjIuNDIgMS4wNiAxLjA2IDAgMCAwLS4wMi4zMXYuMDZhMS4xNyAxLjE3IDAgMCAwIC4xNi40Ny45My45MyAwIDAgMCAuMDcuMSAxLjUgMS41IDAgMCAwIC4xLjEybC4wNS4wNmguMDFhMS45NCAxLjk0IDAgMCAwIC4wOS4wOCAxIDEgMCAwIDAgLjE3LjFsLjA3LjA0YTEuMjUgMS4yNSAwIDAgMCAuNS4xaDYuOWMuMSAwIC4yIDAgLjI4LS4wMmwuMDctLjAyYTEuMzIgMS4zMiAwIDAgMCAuMzQtLjEzbC4xNi0uMS4wMy0uMDNhMS4yOSAxLjI5IDAgMCAwIC4yLS4yIDIuNDMgMi40MyAwIDAgMCAuMTItLjE3Yy4wMy0uMDMuMDUtLjA4LjA3LS4xMmwuMDItLjA1YTEuMjEgMS4yMSAwIDAgMCAuMDktLjN2LS4wOGwuMDEtLjA5YTEuMzIgMS4zMiAwIDAgMC0uMi0uNzNsLTEuNi0yLjY0LS4wNi0uMS0uMi0uMzItLjMzLS41NHYtLjAybC0uMDUtLjA3LTEuMy0yLjE1LS4xMi0uMDctLjA3LS4wNGE0Ljk0IDQuOTQgMCAwIDAtMi40Ni0uNjdjLTEuMDMgMC0xLjc2LjU3LTIuMjYgMS4yWiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMi4yOSAyMS4wOGMwIC4yOS0uMDkuNTgtLjI3Ljg0bC0xLjMxIDEuODRIN2wyLjUyLTMuNTNhMS41NCAxLjU0IDAgMCAxIDIuMS0uMzZjLjQzLjI4LjY2Ljc0LjY2IDEuMloiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTEuMTYgMjEuMjVhLjU2LjU2IDAgMCAxLS41Ny41NS41Ni41NiAwIDAgMS0uNTctLjU2LjU2LjU2IDAgMCAxIC41Ny0uNTUuNTYuNTYgMCAwIDEgLjU3LjU2WiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjE1LjIzIiB4Mj0iMTkuMyIgeTE9IjI1Ljc4IiB5Mj0iNi4xMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM2NTIyRjQiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzlCNkJGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0E1ODVGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjIuNTkiIHgyPSIyNC44IiB5MT0iMjQuNzEiIHkyPSIxNS41MyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM0MjFGOEIiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzcyMzBGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzk3NzNGRiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPg==',\n    webUrl: 'https://asigna.io',\n    chromeWebStoreUrl:\n      'https://chromewebstore.google.com/detail/asigna-multisig/gopddoinbenlokghakiafackadkbnlid',\n  },\n];\n","export * from './auth';\nexport * from './bitcoin';\nexport * from './transactions';\nexport * from './signature';\nexport * from './signature/structuredData';\nexport * from './profile';\nexport * from './types';\nexport * from './utils';\nexport * from './ui';\n\nexport * from './providers';\n\n// re-exports\nexport * from '@stacks/auth';\nexport {\n  clearSelectedProviderId,\n  getSelectedProviderId,\n  setSelectedProviderId,\n} from '@stacks/connect-ui';\n"]}